var wn=Object.defineProperty;var wr=t=>{throw TypeError(t)};var xn=(t,e,s)=>e in t?wn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var V=(t,e,s)=>xn(t,typeof e!="symbol"?e+"":e,s),kn=(t,e,s)=>e.has(t)||wr("Cannot "+s);var S=(t,e,s)=>(kn(t,e,"read from private field"),s?s.call(t):e.get(t)),I=(t,e,s)=>e.has(t)?wr("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function s(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(i){if(i.ep)return;i.ep=!0;const n=s(i);fetch(i.href,n)}})();const En=!1;var lr=Array.isArray,ar=Array.from,$n=Object.defineProperty,We=Object.getOwnPropertyDescriptor,Mr=Object.getOwnPropertyDescriptors,An=Object.prototype,Sn=Array.prototype,or=Object.getPrototypeOf;function gt(t){return typeof t=="function"}const ge=()=>{};function jn(t){return t()}function Ys(t){for(var e=0;e<t.length;e++)t[e]()}const Te=2,Nr=4,vs=8,cr=16,ze=32,ds=64,Hs=128,lt=256,xs=512,be=1024,Je=2048,ps=4096,Ie=8192,dt=16384,Cn=32768,hs=65536,On=1<<17,Ln=1<<19,Pr=1<<20,Xe=Symbol("$state"),Fr=Symbol("legacy props"),Dn=Symbol("");function Rr(t){return t===this.v}function ur(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function fr(t){return!ur(t,this.v)}function Tn(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function zn(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function In(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Mn(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Nn(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function Pn(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Fn(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Rn(){throw new Error("https://svelte.dev/e/state_unsafe_local_read")}function qn(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let pt=!1;function Vn(){pt=!0}function Ae(t){return{f:0,v:t,reactions:null,equals:Rr,version:0}}function z(t){return Bn(Ae(t))}function vr(t,e=!1){var r;const s=Ae(t);return e||(s.equals=fr),pt&&K!==null&&K.l!==null&&((r=K.l).s??(r.s=[])).push(s),s}function Bn(t){return W!==null&&W.f&Te&&(Me===null?oi([t]):Me.push(t)),t}function T(t,e){return W!==null&&yr()&&W.f&(Te|cr)&&(Me===null||!Me.includes(t))&&qn(),Ks(t,e)}function Ks(t,e){return t.equals(e)||(t.v=e,t.version=ln(),qr(t,Je),yr()&&R!==null&&R.f&be&&!(R.f&ze)&&(me!==null&&me.includes(t)?(Pe(R,Je),qs(R)):Ze===null?ci([t]):Ze.push(t))),e}function qr(t,e){var s=t.reactions;if(s!==null)for(var r=yr(),i=s.length,n=0;n<i;n++){var a=s[n],d=a.f;d&Je||!r&&a===R||(Pe(a,e),d&(be|lt)&&(d&Te?qr(a,ps):qs(a)))}}const dr=1,pr=2,Vr=4,Gn=8,Un=16,Yn=1,Hn=2,Kn=4,Wn=8,Xn=16,Zn=1,Jn=2,ye=Symbol();let Qn=!1;function L(t,e=null,s){if(typeof t!="object"||t===null||Xe in t)return t;const r=or(t);if(r!==An&&r!==Sn)return t;var i=new Map,n=lr(t),a=Ae(0);n&&i.set("length",Ae(t.length));var d;return new Proxy(t,{defineProperty(v,o,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&Pn();var p=i.get(o);return p===void 0?(p=Ae(c.value),i.set(o,p)):T(p,L(c.value,d)),!0},deleteProperty(v,o){var c=i.get(o);if(c===void 0)o in v&&i.set(o,Ae(ye));else{if(n&&typeof o=="string"){var p=i.get("length"),f=Number(o);Number.isInteger(f)&&f<p.v&&T(p,f)}T(c,ye),xr(a)}return!0},get(v,o,c){var y;if(o===Xe)return t;var p=i.get(o),f=o in v;if(p===void 0&&(!f||(y=We(v,o))!=null&&y.writable)&&(p=Ae(L(f?v[o]:ye,d)),i.set(o,p)),p!==void 0){var m=l(p);return m===ye?void 0:m}return Reflect.get(v,o,c)},getOwnPropertyDescriptor(v,o){var c=Reflect.getOwnPropertyDescriptor(v,o);if(c&&"value"in c){var p=i.get(o);p&&(c.value=l(p))}else if(c===void 0){var f=i.get(o),m=f==null?void 0:f.v;if(f!==void 0&&m!==ye)return{enumerable:!0,configurable:!0,value:m,writable:!0}}return c},has(v,o){var m;if(o===Xe)return!0;var c=i.get(o),p=c!==void 0&&c.v!==ye||Reflect.has(v,o);if(c!==void 0||R!==null&&(!p||(m=We(v,o))!=null&&m.writable)){c===void 0&&(c=Ae(p?L(v[o],d):ye),i.set(o,c));var f=l(c);if(f===ye)return!1}return p},set(v,o,c,p){var k;var f=i.get(o),m=o in v;if(n&&o==="length")for(var y=c;y<f.v;y+=1){var $=i.get(y+"");$!==void 0?T($,ye):y in v&&($=Ae(ye),i.set(y+"",$))}f===void 0?(!m||(k=We(v,o))!=null&&k.writable)&&(f=Ae(void 0),T(f,L(c,d)),i.set(o,f)):(m=f.v!==ye,T(f,L(c,d)));var w=Reflect.getOwnPropertyDescriptor(v,o);if(w!=null&&w.set&&w.set.call(p,c),!m){if(n&&typeof o=="string"){var b=i.get("length"),_=Number(o);Number.isInteger(_)&&_>=b.v&&T(b,_+1)}xr(a)}return!0},ownKeys(v){l(a);var o=Reflect.ownKeys(v).filter(f=>{var m=i.get(f);return m===void 0||m.v!==ye});for(var[c,p]of i)p.v!==ye&&!(c in v)&&o.push(c);return o},setPrototypeOf(){Fn()}})}function xr(t,e=1){T(t,t.v+e)}var xt,Br,Gr;function ei(){if(xt===void 0){xt=window;var t=Element.prototype,e=Node.prototype;Br=We(e,"firstChild").get,Gr=We(e,"nextSibling").get,t.__click=void 0,t.__className="",t.__attributes=null,t.__styles=null,t.__e=void 0,Text.prototype.__t=void 0}}function Is(t=""){return document.createTextNode(t)}function ks(t){return Br.call(t)}function Ms(t){return Gr.call(t)}function h(t,e){return ks(t)}function Y(t,e){{var s=ks(t);return s instanceof Comment&&s.data===""?Ms(s):s}}function g(t,e=1,s=!1){let r=t;for(;e--;)r=Ms(r);return r}function ti(t){t.textContent=""}function P(t){var e=Te|Je;R===null?e|=lt:R.f|=Pr;var s=W!==null&&W.f&Te?W:null;const r={children:null,ctx:K,deps:null,equals:Rr,f:e,fn:t,reactions:null,v:null,version:0,parent:s??R};return s!==null&&(s.children??(s.children=[])).push(r),r}function Ur(t){const e=P(t);return e.equals=fr,e}function Yr(t){var e=t.children;if(e!==null){t.children=null;for(var s=0;s<e.length;s+=1){var r=e[s];r.f&Te?hr(r):et(r)}}}function si(t){for(var e=t.parent;e!==null;){if(!(e.f&Te))return e;e=e.parent}return null}function Hr(t){var e,s=R;Le(si(t));try{Yr(t),e=an(t)}finally{Le(s)}return e}function Kr(t){var e=Hr(t),s=(ft||t.f&lt)&&t.deps!==null?ps:be;Pe(t,s),t.equals(e)||(t.v=e,t.version=ln())}function hr(t){Yr(t),kt(t,0),Pe(t,dt),t.v=t.children=t.deps=t.ctx=t.reactions=null}function Wr(t){R===null&&W===null&&In(),W!==null&&W.f&lt&&zn(),gr&&Tn()}function ri(t,e){var s=e.last;s===null?e.last=e.first=t:(s.next=t,t.prev=s,e.last=t)}function ht(t,e,s,r=!0){var i=(t&ds)!==0,n=R,a={ctx:K,deps:null,deriveds:null,nodes_start:null,nodes_end:null,f:t|Je,first:null,fn:e,last:null,next:null,parent:i?null:n,prev:null,teardown:null,transitions:null,version:0};if(s){var d=vt;try{kr(!0),Rs(a),a.f|=Cn}catch(c){throw et(a),c}finally{kr(d)}}else e!==null&&qs(a);var v=s&&a.deps===null&&a.first===null&&a.nodes_start===null&&a.teardown===null&&(a.f&Pr)===0;if(!v&&!i&&r&&(n!==null&&ri(a,n),W!==null&&W.f&Te)){var o=W;(o.children??(o.children=[])).push(a)}return a}function Xr(t){const e=ht(vs,null,!1);return Pe(e,be),e.teardown=t,e}function Es(t){Wr();var e=R!==null&&(R.f&ze)!==0&&K!==null&&!K.m;if(e){var s=K;(s.e??(s.e=[])).push({fn:t,effect:R,reaction:W})}else{var r=Ns(t);return r}}function ni(t){return Wr(),_r(t)}function ii(t){const e=ht(ds,t,!0);return()=>{et(e)}}function Ns(t){return ht(Nr,t,!1)}function _r(t){return ht(vs,t,!0)}function F(t){return _s(t)}function _s(t,e=0){return ht(vs|cr|e,t,!0)}function nt(t,e=!0){return ht(vs|ze,t,!0,e)}function Zr(t){var e=t.teardown;if(e!==null){const s=gr,r=W;Er(!0),Ne(null);try{e.call(null)}finally{Er(s),Ne(r)}}}function Jr(t){var e=t.deriveds;if(e!==null){t.deriveds=null;for(var s=0;s<e.length;s+=1)hr(e[s])}}function Qr(t,e=!1){var s=t.first;for(t.first=t.last=null;s!==null;){var r=s.next;et(s,e),s=r}}function li(t){for(var e=t.first;e!==null;){var s=e.next;e.f&ze||et(e),e=s}}function et(t,e=!0){var s=!1;if((e||t.f&Ln)&&t.nodes_start!==null){for(var r=t.nodes_start,i=t.nodes_end;r!==null;){var n=r===i?null:Ms(r);r.remove(),r=n}s=!0}Qr(t,e&&!s),Jr(t),kt(t,0),Pe(t,dt);var a=t.transitions;if(a!==null)for(const v of a)v.stop();Zr(t);var d=t.parent;d!==null&&d.first!==null&&en(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=null}function en(t){var e=t.parent,s=t.prev,r=t.next;s!==null&&(s.next=r),r!==null&&(r.prev=s),e!==null&&(e.first===t&&(e.first=r),e.last===t&&(e.last=s))}function $s(t,e){var s=[];mr(t,s,!0),tn(s,()=>{et(t),e&&e()})}function tn(t,e){var s=t.length;if(s>0){var r=()=>--s||e();for(var i of t)i.out(r)}else e()}function mr(t,e,s){if(!(t.f&Ie)){if(t.f^=Ie,t.transitions!==null)for(const a of t.transitions)(a.is_global||s)&&e.push(a);for(var r=t.first;r!==null;){var i=r.next,n=(r.f&hs)!==0||(r.f&ze)!==0;mr(r,e,n?s:!1),r=i}}}function As(t){sn(t,!0)}function sn(t,e){if(t.f&Ie){ms(t)&&Rs(t),t.f^=Ie;for(var s=t.first;s!==null;){var r=s.next,i=(s.f&hs)!==0||(s.f&ze)!==0;sn(s,i?e:!1),s=r}if(t.transitions!==null)for(const n of t.transitions)(n.is_global||e)&&n.in()}}let Ws=!1,Xs=[];function ai(){Ws=!1;const t=Xs.slice();Xs=[],Ys(t)}function Ps(t){Ws||(Ws=!0,queueMicrotask(ai)),Xs.push(t)}function rn(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let bs=!1,Ss=!1,js=null,vt=!1,gr=!1;function kr(t){vt=t}function Er(t){gr=t}let Zs=[],bt=0;let W=null;function Ne(t){W=t}let R=null;function Le(t){R=t}let Me=null;function oi(t){Me=t}let me=null,$e=0,Ze=null;function ci(t){Ze=t}let nn=0,ft=!1,K=null;function ln(){return++nn}function yr(){return!pt||K!==null&&K.l===null}function ms(t){var a,d;var e=t.f;if(e&Je)return!0;if(e&ps){var s=t.deps,r=(e&lt)!==0;if(s!==null){var i;if(e&xs){for(i=0;i<s.length;i++)((a=s[i]).reactions??(a.reactions=[])).push(t);t.f^=xs}for(i=0;i<s.length;i++){var n=s[i];if(ms(n)&&Kr(n),r&&R!==null&&!ft&&!((d=n==null?void 0:n.reactions)!=null&&d.includes(t))&&(n.reactions??(n.reactions=[])).push(t),n.version>t.version)return!0}}r||Pe(t,be)}return!1}function ui(t,e){for(var s=e;s!==null;){if(s.f&Hs)try{s.fn(t);return}catch{s.f^=Hs}s=s.parent}throw bs=!1,t}function fi(t){return(t.f&dt)===0&&(t.parent===null||(t.parent.f&Hs)===0)}function Fs(t,e,s,r){if(bs){if(s===null&&(bs=!1),fi(e))throw t;return}s!==null&&(bs=!0);{ui(t,e);return}}function an(t){var f;var e=me,s=$e,r=Ze,i=W,n=ft,a=Me,d=K,v=t.f;me=null,$e=0,Ze=null,W=v&(ze|ds)?null:t,ft=!vt&&(v&lt)!==0,Me=null,K=t.ctx;try{var o=(0,t.fn)(),c=t.deps;if(me!==null){var p;if(kt(t,$e),c!==null&&$e>0)for(c.length=$e+me.length,p=0;p<me.length;p++)c[$e+p]=me[p];else t.deps=c=me;if(!ft)for(p=$e;p<c.length;p++)((f=c[p]).reactions??(f.reactions=[])).push(t)}else c!==null&&$e<c.length&&(kt(t,$e),c.length=$e);return o}finally{me=e,$e=s,Ze=r,W=i,ft=n,Me=a,K=d}}function vi(t,e){let s=e.reactions;if(s!==null){var r=s.indexOf(t);if(r!==-1){var i=s.length-1;i===0?s=e.reactions=null:(s[r]=s[i],s.pop())}}s===null&&e.f&Te&&(me===null||!me.includes(e))&&(Pe(e,ps),e.f&(lt|xs)||(e.f^=xs),kt(e,0))}function kt(t,e){var s=t.deps;if(s!==null)for(var r=e;r<s.length;r++)vi(t,s[r])}function Rs(t){var e=t.f;if(!(e&dt)){Pe(t,be);var s=R,r=K;R=t;try{e&cr?li(t):Qr(t),Jr(t),Zr(t);var i=an(t);t.teardown=typeof i=="function"?i:null,t.version=nn}catch(n){Fs(n,t,s,r||t.ctx)}finally{R=s}}}function di(){if(bt>1e3){bt=0;try{Mn()}catch(t){if(js!==null)Fs(t,js,null);else throw t}}bt++}function pi(t){var e=t.length;if(e!==0){di();var s=vt;vt=!0;try{for(var r=0;r<e;r++){var i=t[r];i.f&be||(i.f^=be);var n=[];on(i,n),hi(n)}}finally{vt=s}}}function hi(t){var e=t.length;if(e!==0)for(var s=0;s<e;s++){var r=t[s];if(!(r.f&(dt|Ie)))try{ms(r)&&(Rs(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null?en(r):r.fn=null))}catch(i){Fs(i,r,null,r.ctx)}}}function _i(){if(Ss=!1,bt>1001)return;const t=Zs;Zs=[],pi(t),Ss||(bt=0,js=null)}function qs(t){Ss||(Ss=!0,queueMicrotask(_i)),js=t;for(var e=t;e.parent!==null;){e=e.parent;var s=e.f;if(s&(ds|ze)){if(!(s&be))return;e.f^=be}}Zs.push(e)}function on(t,e){var s=t.first,r=[];e:for(;s!==null;){var i=s.f,n=(i&ze)!==0,a=n&&(i&be)!==0,d=s.next;if(!a&&!(i&Ie))if(i&vs){if(n)s.f^=be;else try{ms(s)&&Rs(s)}catch(p){Fs(p,s,null,s.ctx)}var v=s.first;if(v!==null){s=v;continue}}else i&Nr&&r.push(s);if(d===null){let p=s.parent;for(;p!==null;){if(t===p)break e;var o=p.next;if(o!==null){s=o;continue e}p=p.parent}}s=d}for(var c=0;c<r.length;c++)v=r[c],e.push(v),on(v,e)}function l(t){var c;var e=t.f,s=(e&Te)!==0;if(s&&e&dt){var r=Hr(t);return hr(t),r}if(W!==null){Me!==null&&Me.includes(t)&&Rn();var i=W.deps;me===null&&i!==null&&i[$e]===t?$e++:me===null?me=[t]:me.push(t),Ze!==null&&R!==null&&R.f&be&&!(R.f&ze)&&Ze.includes(t)&&(Pe(R,Je),qs(R))}else if(s&&t.deps===null)for(var n=t,a=n.parent,d=n;a!==null;)if(a.f&Te){var v=a;d=v,a=v.parent}else{var o=a;(c=o.deriveds)!=null&&c.includes(d)||(o.deriveds??(o.deriveds=[])).push(d);break}return s&&(n=t,ms(n)&&Kr(n)),t.v}function se(t){const e=W;try{return W=null,t()}finally{W=e}}const mi=~(Je|ps|be);function Pe(t,e){t.f=t.f&mi|e}function pe(t){return cn().get(t)}function gi(t,e){return cn().set(t,e),e}function cn(t){return K===null&&rn(),K.c??(K.c=new Map(yi(K)||void 0))}function yi(t){let e=t.p;for(;e!==null;){const s=e.c;if(s!==null)return s;e=e.p}return null}function G(t,e=!1,s){K={p:K,c:null,e:null,m:!1,s:t,x:null,l:null},pt&&!e&&(K.l={s:null,u:null,r1:[],r2:Ae(!1)})}function U(t){const e=K;if(e!==null){const a=e.e;if(a!==null){var s=R,r=W;e.e=null;try{for(var i=0;i<a.length;i++){var n=a[i];Le(n.effect),Ne(n.reaction),Ns(n.fn)}}finally{Le(s),Ne(r)}}K=e.p,e.m=!0}return{}}function un(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(Xe in t)Js(t);else if(!Array.isArray(t))for(let e in t){const s=t[e];typeof s=="object"&&s&&Xe in s&&Js(s)}}}function Js(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let r in t)try{Js(t[r],e)}catch{}const s=or(t);if(s!==Object.prototype&&s!==Array.prototype&&s!==Map.prototype&&s!==Set.prototype&&s!==Date.prototype){const r=Mr(s);for(let i in r){const n=r[i].get;if(n)try{n.call(t)}catch{}}}}}function bi(t,e){if(e){const s=document.body;t.autofocus=!0,Ps(()=>{document.activeElement===s&&t.focus()})}}function wi(t){var e=W,s=R;Ne(null),Le(null);try{return t()}finally{Ne(e),Le(s)}}const fn=new Set,Qs=new Set;function vn(t,e,s,r){function i(n){if(r.capture||yt.call(e,n),!n.cancelBubble)return wi(()=>s.call(this,n))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?Ps(()=>{e.addEventListener(t,i,r)}):e.addEventListener(t,i,r),i}function te(t,e,s,r,i){var n={capture:r,passive:i},a=vn(t,e,s,n);(e===document.body||e===window||e===document)&&Xr(()=>{e.removeEventListener(t,a,n)})}function _t(t){for(var e=0;e<t.length;e++)fn.add(t[e]);for(var s of Qs)s(t)}function yt(t){var _;var e=this,s=e.ownerDocument,r=t.type,i=((_=t.composedPath)==null?void 0:_.call(t))||[],n=i[0]||t.target,a=0,d=t.__root;if(d){var v=i.indexOf(d);if(v!==-1&&(e===document||e===window)){t.__root=e;return}var o=i.indexOf(e);if(o===-1)return;v<=o&&(a=v)}if(n=i[a]||t.target,n!==e){$n(t,"currentTarget",{configurable:!0,get(){return n||s}});var c=W,p=R;Ne(null),Le(null);try{for(var f,m=[];n!==null;){var y=n.assignedSlot||n.parentNode||n.host||null;try{var $=n["__"+r];if($!==void 0&&!n.disabled)if(lr($)){var[w,...b]=$;w.apply(n,[t,...b])}else $.call(n,t)}catch(k){f?m.push(k):f=k}if(t.cancelBubble||y===e||y===null)break;n=y}if(f){for(let k of m)queueMicrotask(()=>{throw k});throw f}}finally{t.__root=e,delete t.currentTarget,Ne(c),Le(p)}}}function xi(t){var e=document.createElement("template");return e.innerHTML=t,e.content}function Cs(t,e){var s=R;s.nodes_start===null&&(s.nodes_start=t,s.nodes_end=e)}function C(t,e){var s=(e&Zn)!==0,r=(e&Jn)!==0,i,n=!t.startsWith("<!>");return()=>{i===void 0&&(i=xi(n?t:"<!>"+t),s||(i=ks(i)));var a=r?document.importNode(i,!0):i.cloneNode(!0);if(s){var d=ks(a),v=a.lastChild;Cs(d,v)}else Cs(a,a);return a}}function mt(t=""){{var e=Is(t+"");return Cs(e,e),e}}function we(){var t=document.createDocumentFragment(),e=document.createComment(""),s=Is();return t.append(e,s),Cs(e,s),t}function E(t,e){t!==null&&t.before(e)}function ki(t){return t.endsWith("capture")&&t!=="gotpointercapture"&&t!=="lostpointercapture"}const Ei=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function $i(t){return Ei.includes(t)}const Ai={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject"};function Si(t){return t=t.toLowerCase(),Ai[t]??t}const ji=["touchstart","touchmove"];function Ci(t){return ji.includes(t)}function ve(t,e){var s=e==null?"":typeof e=="object"?e+"":e;s!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=s,t.nodeValue=s==null?"":s+"")}function Oi(t,e){return Li(t,e)}const ct=new Map;function Li(t,{target:e,anchor:s,props:r={},events:i,context:n,intro:a=!0}){ei();var d=new Set,v=p=>{for(var f=0;f<p.length;f++){var m=p[f];if(!d.has(m)){d.add(m);var y=Ci(m);e.addEventListener(m,yt,{passive:y});var $=ct.get(m);$===void 0?(document.addEventListener(m,yt,{passive:y}),ct.set(m,1)):ct.set(m,$+1)}}};v(ar(fn)),Qs.add(v);var o=void 0,c=ii(()=>{var p=s??e.appendChild(Is());return nt(()=>{if(n){G({});var f=K;f.c=n}i&&(r.$$events=i),o=t(p,r)||{},n&&U()}),()=>{var y;for(var f of d){e.removeEventListener(f,yt);var m=ct.get(f);--m===0?(document.removeEventListener(f,yt),ct.delete(f)):ct.set(f,m)}Qs.delete(v),$r.delete(o),p!==s&&((y=p.parentNode)==null||y.removeChild(p))}});return $r.set(o,c),o}let $r=new WeakMap;function B(t,e,s=!1){var r=t,i=null,n=null,a=ye,d=s?hs:0,v=!1;const o=(p,f=!0)=>{v=!0,c(f,p)},c=(p,f)=>{a!==(a=p)&&(a?(i?As(i):f&&(i=nt(()=>f(r))),n&&$s(n,()=>{n=null})):(n?As(n):f&&(n=nt(()=>f(r))),i&&$s(i,()=>{i=null})))};_s(()=>{v=!1,e(o),v||c(null,null)},d)}function Ce(t,e){return e}function Di(t,e,s,r){for(var i=[],n=e.length,a=0;a<n;a++)mr(e[a].e,i,!0);var d=n>0&&i.length===0&&s!==null;if(d){var v=s.parentNode;ti(v),v.append(s),r.clear(),Ke(t,e[0].prev,e[n-1].next)}tn(i,()=>{for(var o=0;o<n;o++){var c=e[o];d||(r.delete(c.k),Ke(t,c.prev,c.next)),et(c.e,!d)}})}function Oe(t,e,s,r,i,n=null){var a=t,d={flags:e,items:new Map,first:null},v=(e&Vr)!==0;if(v){var o=t;a=o.appendChild(Is())}var c=null,p=!1;_s(()=>{var f=s(),m=lr(f)?f:f==null?[]:ar(f),y=m.length;if(!(p&&y===0)){p=y===0;{var $=W;Ti(m,d,a,i,e,($.f&Ie)!==0,r)}n!==null&&(y===0?c?As(c):c=nt(()=>n(a)):c!==null&&$s(c,()=>{c=null})),s()}})}function Ti(t,e,s,r,i,n,a){var J,re,ce,ue;var d=(i&Gn)!==0,v=(i&(dr|pr))!==0,o=t.length,c=e.items,p=e.first,f=p,m,y=null,$,w=[],b=[],_,k,x,A;if(d)for(A=0;A<o;A+=1)_=t[A],k=a(_,A),x=c.get(k),x!==void 0&&((J=x.a)==null||J.measure(),($??($=new Set)).add(x));for(A=0;A<o;A+=1){if(_=t[A],k=a(_,A),x=c.get(k),x===void 0){var j=f?f.e.nodes_start:s;y=Ii(j,e,y,y===null?e.first:y.next,_,k,A,r,i),c.set(k,y),w=[],b=[],f=y.next;continue}if(v&&zi(x,_,A,i),x.e.f&Ie&&(As(x.e),d&&((re=x.a)==null||re.unfix(),($??($=new Set)).delete(x))),x!==f){if(m!==void 0&&m.has(x)){if(w.length<b.length){var D=b[0],O;y=D.prev;var M=w[0],q=w[w.length-1];for(O=0;O<w.length;O+=1)Ar(w[O],D,s);for(O=0;O<b.length;O+=1)m.delete(b[O]);Ke(e,M.prev,q.next),Ke(e,y,M),Ke(e,q,D),f=D,y=q,A-=1,w=[],b=[]}else m.delete(x),Ar(x,f,s),Ke(e,x.prev,x.next),Ke(e,x,y===null?e.first:y.next),Ke(e,y,x),y=x;continue}for(w=[],b=[];f!==null&&f.k!==k;)(n||!(f.e.f&Ie))&&(m??(m=new Set)).add(f),b.push(f),f=f.next;if(f===null)continue;x=f}w.push(x),y=x,f=x.next}if(f!==null||m!==void 0){for(var X=m===void 0?[]:ar(m);f!==null;)(n||!(f.e.f&Ie))&&X.push(f),f=f.next;var H=X.length;if(H>0){var le=i&Vr&&o===0?s:null;if(d){for(A=0;A<H;A+=1)(ce=X[A].a)==null||ce.measure();for(A=0;A<H;A+=1)(ue=X[A].a)==null||ue.fix()}Di(e,X,le,c)}}d&&Ps(()=>{var N;if($!==void 0)for(x of $)(N=x.a)==null||N.apply()}),R.first=e.first&&e.first.e,R.last=y&&y.e}function zi(t,e,s,r){r&dr&&Ks(t.v,e),r&pr?Ks(t.i,s):t.i=s}function Ii(t,e,s,r,i,n,a,d,v){var o=(v&dr)!==0,c=(v&Un)===0,p=o?c?vr(i):Ae(i):i,f=v&pr?Ae(a):a,m={i:f,v:p,k:n,a:null,e:null,prev:s,next:r};try{return m.e=nt(()=>d(t,p,f),Qn),m.e.prev=s&&s.e,m.e.next=r&&r.e,s===null?e.first=m:(s.next=m,s.e.next=m.e),r!==null&&(r.prev=m,r.e.prev=m.e),m}finally{}}function Ar(t,e,s){for(var r=t.next?t.next.e.nodes_start:s,i=e?e.e.nodes_start:s,n=t.e.nodes_start;n!==r;){var a=Ms(n);i.before(n),n=a}}function Ke(t,e,s){e===null?t.first=s:(e.next=s,e.e.next=s&&s.e),s!==null&&(s.prev=e,s.e.prev=e&&e.e)}function Se(t,e,...s){var r=t,i=ge,n;_s(()=>{i!==(i=e())&&(n&&(et(n),n=null),n=nt(()=>i(r,...s)))},hs)}function Mi(t,e,s){var r=t,i,n;_s(()=>{i!==(i=e())&&(n&&($s(n),n=null),i&&(n=nt(()=>s(r,i))))},hs)}function rt(t,e,s){Ns(()=>{var r=se(()=>e(t,s==null?void 0:s())||{});if(s&&(r!=null&&r.update)){var i=!1,n={};_r(()=>{var a=s();un(a),i&&ur(n,a)&&(n=a,r.update(a))}),i=!0}if(r!=null&&r.destroy)return()=>r.destroy()})}function Ni(t,e){e?t.hasAttribute("selected")||t.setAttribute("selected",""):t.removeAttribute("selected")}function Os(t,e,s,r){var i=t.__attributes??(t.__attributes={});i[e]!==(i[e]=s)&&(e==="style"&&"__styles"in t&&(t.__styles={}),e==="loading"&&(t[Dn]=s),s==null?t.removeAttribute(e):typeof s!="string"&&br(t).includes(e)?t[e]=s:t.setAttribute(e,s))}function u(t,e,s){var r=W,i=R;Ne(null),Le(null);try{(er.has(t.nodeName)||customElements.get(t.tagName.toLowerCase())?br(t).includes(e):s&&typeof s=="object")?t[e]=s:Os(t,e,s==null?s:String(s))}finally{Ne(r),Le(i)}}function at(t,e,s,r,i=!1,n=!1,a=!1){var d=e||{},v=t.tagName==="OPTION";for(var o in e)o in s||(s[o]=null);var c=br(t),p=t.__attributes??(t.__attributes={});for(const _ in s){let k=s[_];if(v&&_==="value"&&k==null){t.value=t.__value="",d[_]=k;continue}var f=d[_];if(k!==f){d[_]=k;var m=_[0]+_[1];if(m!=="$$"){if(m==="on"){const x={},A="$$"+_;let j=_.slice(2);var y=$i(j);if(ki(j)&&(j=j.slice(0,-7),x.capture=!0),!y&&f){if(k!=null)continue;t.removeEventListener(j,d[A],x),d[A]=null}if(k!=null)if(y)t[`__${j}`]=k,_t([j]);else{let D=function(O){d[_].call(this,O)};var b=D;d[A]=vn(j,t,D,x)}else y&&(t[`__${j}`]=void 0)}else if(_==="style"&&k!=null)t.style.cssText=k+"";else if(_==="autofocus")bi(t,!!k);else if(_==="__value"||_==="value"&&k!=null)t.value=t[_]=t.__value=k;else if(_==="selected"&&v)Ni(t,k);else{var $=_;i||($=Si($));var w=$==="defaultValue"||$==="defaultChecked";if(k==null&&!n&&!w)if(p[_]=null,$==="value"||$==="checked"){let x=t;if($==="value"){let A=x.defaultValue;x.removeAttribute($),x.defaultValue=A}else{let A=x.defaultChecked;x.removeAttribute($),x.defaultChecked=A}}else t.removeAttribute(_);else w||c.includes($)&&(n||typeof k!="string")?t[$]=k:typeof k!="function"&&Os(t,$,k)}_==="style"&&"__styles"in t&&(t.__styles={})}}}return d}var er=new Map;function br(t){var e=er.get(t.nodeName);if(e)return e;er.set(t.nodeName,e=[]);for(var s,r=t,i=Element.prototype;i!==r;){s=Mr(r);for(var n in s)s[n].set&&e.push(n);r=or(r)}return e}function Et(t,e,s){if(s){if(t.classList.contains(e))return;t.classList.add(e)}else{if(!t.classList.contains(e))return;t.classList.remove(e)}}function Sr(t,e){return t===e||(t==null?void 0:t[Xe])===e}function tr(t={},e,s,r){return Ns(()=>{var i,n;return _r(()=>{i=n,n=[],se(()=>{t!==s(...n)&&(e(t,...n),i&&Sr(s(...i),t)&&e(null,...i))})}),()=>{Ps(()=>{n&&Sr(s(...n),t)&&e(null,...n)})}}),t}function Pi(t=!1){const e=K,s=e.l.u;if(!s)return;let r=()=>un(e.s);if(t){let i=0,n={};const a=P(()=>{let d=!1;const v=e.s;for(const o in v)v[o]!==n[o]&&(n[o]=v[o],d=!0);return d&&i++,i});r=()=>l(a)}s.b.length&&ni(()=>{jr(e,r),Ys(s.b)}),Es(()=>{const i=se(()=>s.m.map(jn));return()=>{for(const n of i)typeof n=="function"&&n()}}),s.a.length&&Es(()=>{jr(e,r),Ys(s.a)})}function jr(t,e){if(t.l.s)for(const s of t.l.s)l(s);e()}function Fi(t,e,s){if(t==null)return e(void 0),ge;const r=se(()=>t.subscribe(e,s));return r.unsubscribe?()=>r.unsubscribe():r}let gs=!1;function ae(t,e,s){const r=s[e]??(s[e]={store:null,source:vr(void 0),unsubscribe:ge});if(r.store!==t)if(r.unsubscribe(),r.store=t??null,t==null)r.source.v=void 0,r.unsubscribe=ge;else{var i=!0;r.unsubscribe=Fi(t,n=>{i?r.source.v=n:T(r.source,n)}),i=!1}return l(r.source)}function oe(){const t={};return Xr(()=>{for(var e in t)t[e].unsubscribe()}),t}function Re(t,e,s){return t.set(s),e}function Ri(t){var e=gs;try{return gs=!1,[t(),gs]}finally{gs=e}}const qi={get(t,e){if(!t.exclude.includes(e))return t.props[e]},set(t,e){return!1},getOwnPropertyDescriptor(t,e){if(!t.exclude.includes(e)&&e in t.props)return{enumerable:!0,configurable:!0,value:t.props[e]}},has(t,e){return t.exclude.includes(e)?!1:e in t.props},ownKeys(t){return Reflect.ownKeys(t.props).filter(e=>!t.exclude.includes(e))}};function tt(t,e,s){return new Proxy({props:t,exclude:e},qi)}const Vi={get(t,e){let s=t.props.length;for(;s--;){let r=t.props[s];if(gt(r)&&(r=r()),typeof r=="object"&&r!==null&&e in r)return r[e]}},set(t,e,s){let r=t.props.length;for(;r--;){let i=t.props[r];gt(i)&&(i=i());const n=We(i,e);if(n&&n.set)return n.set(s),!0}return!1},getOwnPropertyDescriptor(t,e){let s=t.props.length;for(;s--;){let r=t.props[s];if(gt(r)&&(r=r()),typeof r=="object"&&r!==null&&e in r){const i=We(r,e);return i&&!i.configurable&&(i.configurable=!0),i}}},has(t,e){if(e===Xe||e===Fr)return!1;for(let s of t.props)if(gt(s)&&(s=s()),s!=null&&e in s)return!0;return!1},ownKeys(t){const e=[];for(let s of t.props){gt(s)&&(s=s());for(const r in s)e.includes(r)||e.push(r)}return e}};function ws(...t){return new Proxy({props:t},Vi)}function Cr(t){for(var e=R,s=R;e!==null&&!(e.f&(ze|ds));)e=e.parent;try{return Le(e),t()}finally{Le(s)}}function ee(t,e,s,r){var D;var i=(s&Yn)!==0,n=!pt||(s&Hn)!==0,a=(s&Wn)!==0,d=(s&Xn)!==0,v=!1,o;a?[o,v]=Ri(()=>t[e]):o=t[e];var c=Xe in t||Fr in t,p=((D=We(t,e))==null?void 0:D.set)??(c&&a&&e in t?O=>t[e]=O:void 0),f=r,m=!0,y=!1,$=()=>(y=!0,m&&(m=!1,d?f=se(r):f=r),f);o===void 0&&r!==void 0&&(p&&n&&Nn(),o=$(),p&&p(o));var w;if(n)w=()=>{var O=t[e];return O===void 0?$():(m=!0,y=!1,O)};else{var b=Cr(()=>(i?P:Ur)(()=>t[e]));b.f|=On,w=()=>{var O=l(b);return O!==void 0&&(f=void 0),O===void 0?f:O}}if(!(s&Kn))return w;if(p){var _=t.$$legacy;return function(O,M){return arguments.length>0?((!n||!M||_||v)&&p(M?w():O),O):w()}}var k=!1,x=!1,A=vr(o),j=Cr(()=>P(()=>{var O=w(),M=l(A);return k?(k=!1,x=!0,M):(x=!1,A.v=O)}));return i||(j.equals=fr),function(O,M){if(arguments.length>0){const q=M?l(j):n&&a?L(O):O;return j.equals(q)||(k=!0,T(A,q),y&&f!==void 0&&(f=q),se(()=>l(j))),O}return l(j)}}function Bi(t){K===null&&rn(),pt&&K.l!==null?Gi(K).m.push(t):Es(()=>{const e=se(t);if(typeof e=="function")return e})}function Gi(t){var e=t.l;return e.u??(e.u={a:[],b:[],m:[]})}const Ui="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ui);const ut=[];function Yi(t,e=ge){let s=null;const r=new Set;function i(d){if(ur(t,d)&&(t=d,s)){const v=!ut.length;for(const o of r)o[1](),ut.push(o,t);if(v){for(let o=0;o<ut.length;o+=2)ut[o][0](ut[o+1]);ut.length=0}}}function n(d){i(d(t))}function a(d,v=ge){const o=[d,v];return r.add(o),r.size===1&&(s=e(i,n)||ge),d(t),()=>{r.delete(o),r.size===0&&s&&(s(),s=null)}}return{set:i,update:n,subscribe:a}}function fe(t){const e=s=>s.detail.item.dispatchEvent(new CustomEvent("sl-select"));return t.addEventListener("sl-select",e),{destroy:()=>t.removeEventListener("sl-select",e)}}function Gs(t,e){let s=null;function r(a){a.delta={x:0,y:0},e("start",a),s={start:a,last:a}}function i(a){s&&(a.delta={x:a.clientX-s.last.clientX,y:a.clientY-s.last.clientY},e("move",a),s.last=a)}function n(a){s&&(a.delta={x:a.clientX-s.last.clientX,y:a.clientY-s.last.clientY},e("end",a),s=null)}return t.addEventListener("pointerdown",r),t.addEventListener("pointermove",i),t.addEventListener("pointerup",n),{destroy(){t.removeEventListener("pointerdown",r),t.removeEventListener("pointermove",i),t.removeEventListener("pointerup",n)}}}Object.defineProperty(Array.prototype,"x",{get(){return this[0]},set(t){this[0]=t}});Object.defineProperty(Array.prototype,"y",{get(){return this[1]},set(t){this[1]=t}});Object.defineProperty(Array.prototype,"z",{get(){return this[2]},set(t){this[2]=t}});Object.defineProperty(Array.prototype,"w",{get(){return this[3]},set(t){this[3]=t}});String.prototype.serialize=function(){return this};Number.prototype.serialize=function(){return this};Boolean.prototype.serialize=function(){return this};Array.prototype.serialize=function(){return this.map(t=>t)};var $t,At,St,jt;class Hi{constructor(){I(this,$t,z(L([])));I(this,At,z(-1));I(this,St,z(300));I(this,jt,z(100))}get stack(){return l(S(this,$t))}set stack(e){T(S(this,$t),L(e))}get index(){return l(S(this,At))}set index(e){T(S(this,At),L(e))}get limit(){return l(S(this,St))}set limit(e){T(S(this,St),L(e))}get timeToCollapse(){return l(S(this,jt))}set timeToCollapse(e){T(S(this,jt),L(e))}reset(){this.index=-1,this.stack=[]}canUndo(){return this.index>=0}undo(){var s;if(!this.canUndo())return;let e=0;for(;e==0||this.stack[this.index]&&Math.abs(e-((s=this.stack[this.index])==null?void 0:s.time))<this.timeToCollapse;)e=this.stack[this.index].time,this.stack[this.index].prev(),this.index--}canRedo(){return this.index<this.stack.length-1}redo(){var s;if(!this.canRedo())return;let e=0;for(;e==0||this.stack[this.index+1]&&Math.abs(e-((s=this.stack[this.index+1])==null?void 0:s.time))<this.timeToCollapse;)e=this.stack[this.index+1].time,this.index++,this.stack[this.index].next()}bindMultiple(e,...s){s.forEach(r=>this.bind(e,r))}bind(e,s,r=null,i=null){const n=this;let a=Object.getPrototypeOf(e);Object.getOwnPropertyDescriptor(a,s)||(a=Object.getPrototypeOf(e.constructor.prototype));const d=Object.getOwnPropertyDescriptor(a,s).set,v=Object.getOwnPropertyDescriptor(a,s).get;Object.defineProperty(e,s,{get(){return v.call(e)},set(o){n.index!=n.stack.length-1&&(n.stack=n.stack.slice(0,n.index+1));const c=v.call(e);if(n.stack.push({ref:e,time:Date.now(),oldData:c==null?null:i?i(c):c.serialize(),newData:o==null?null:i?i(o):o.serialize(),prev(){d.call(e,this.oldData==null?null:r?r(this.oldData):this.oldData)},next(){d.call(e,this.newData==null?null:r?r(this.newData):this.newData)}}),n.stack.length>n.limit){let p=n.stack[n.stack.length-n.limit-1];n.stack=n.stack.filter(f=>f.time>p.time)}n.index=n.stack.length-1,d.call(e,o)}})}}$t=new WeakMap,At=new WeakMap,St=new WeakMap,jt=new WeakMap;var ie=new Hi,Ct;class ot{constructor(e,s){V(this,"class","");V(this,"database",null);V(this,"id",0);I(this,Ct,z(L([])));this.class=e,this.database=s.database,s&&s.id&&(this.id=s.id)}get relationships(){return l(S(this,Ct))}set relationships(e){T(S(this,Ct),L(e))}deactive(){this.relationships.forEach(e=>e.unset(this))}serialize(){return{class:this.class,id:this.id}}}Ct=new WeakMap;var Ot;class je{constructor(e,s,r){V(this,"database",null);V(this,"owner",null);V(this,"description","");I(this,Ot,z(L([])));this.owner=e,this.database=e.database,this.description=s,r&&r.records&&(this.records=r.records.slice()),setTimeout(()=>this.records.forEach(i=>this.database.get(i).relationships.push(this))),ie.bind(this,"records",i=>(i.forEach(n=>{const a=this.database.get(n);a.relationships=[...a.relationships,this]}),this.records.forEach(n=>{if(!i.includes(n)){const a=this.database.get(n);a.relationships=a.relationships.filter(d=>d!=this)}}),i.slice()),i=>i.slice())}get records(){return l(S(this,Ot))}set records(e){T(S(this,Ot),L(e))}first(){return this.records.length>=1?this.database.items[this.records[0]]:null}includes(e){return this.records.find(s=>s==e.id)!=null}get(e){return this.database.get(e)}set(e){return e.relationships.includes(this)||(e.relationships=[...e.relationships,this],this.records=[...this.records,e.id]),e}unset(e){e.relationships=e.relationships.filter(s=>s!=this),this.records=this.records.filter(s=>s!=e.id)}clear(){this.records.forEach(e=>this.unset(this.database.get(e)))}clearAndSet(e){this.clear(),this.set(e)}serialize(){return{records:this.records.slice()}}}Ot=new WeakMap;var Lt,Dt;class Or{constructor(e=null){I(this,Lt,z(1));I(this,Dt,z(L({})));e&&(e.items&&(this.items=Object.fromEntries(Object.keys(e.items).map(s=>[s,new Ge[e.items[s].class]({...e.items[s],database:this})]))),e.seq&&(this.seq=e.seq))}get seq(){return l(S(this,Lt))}set seq(e){T(S(this,Lt),L(e))}get items(){return l(S(this,Dt))}set items(e){T(S(this,Dt),L(e))}get(e){return this.items[e]}add(e,s={}){const r=new e({...s,id:this.seq,database:this});return this.items=Object.assign({},{[r.id]:r,...this.items}),this.seq++,setTimeout(()=>this.prune()),r}prune(){this.items=Object.fromEntries(Object.keys(this.items).filter(e=>this.items[e].relationships.length>0||ie.stack.find(s=>s.ref==this.items[e])).map(e=>[e,this.items[e]]))}serialize(){return{items:Object.fromEntries(Object.keys(this.items).filter(e=>this.items[e].relationships.length>0).map(e=>[e,this.items[e].serialize()])),seq:this.seq}}}Lt=new WeakMap,Dt=new WeakMap;const Ge={};var Tt,zt,It;class Lr{constructor(e=null){I(this,Tt,z(24));I(this,zt,z(1024));I(this,It,z(768));e&&(e.fps&&(this.fps=e.fps),e.width&&(this.width=e.width),e.height&&(this.height=e.height)),ie.bindMultiple(this,"fps","width","height")}get fps(){return l(S(this,Tt))}set fps(e){T(S(this,Tt),L(e))}get width(){return l(S(this,zt))}set width(e){T(S(this,zt),L(e))}get height(){return l(S(this,It))}set height(e){T(S(this,It),L(e))}serialize(){return{fps:this.fps,width:this.width,height:this.height}}}Tt=new WeakMap,zt=new WeakMap,It=new WeakMap;function Vs(t,e,s){let r=t.ctx;r.save(),e.blendMode!="source-over"&&(r.globalCompositeOperation=e.blendMode),e.imageSmooth!="bypass"&&(r.imageSmoothingEnabled=e.imageSmooth!="off",e.imageSmooth!="off"&&(r.imageSmoothingQuality=e.imageSmooth)),e.opacity!=null&&(r.globalAlpha*=e.opacity),e.position&&r.translate(e.position.x,e.position.y),e.rotation&&r.rotate(e.rotation*Math.PI/180),e.scale&&r.scale(e.scale.x,e.scale.y),s(),r.restore()}var Ki=C('<div slot="prefix"><!></div>'),Wi=C('<div slot="suffix"><!></div>'),Xi=C("<sl-button><!> <!> <!></sl-button>",2);function Dr(t,e){G(e,!0);const s=ee(e,"prefix",3,null),r=ee(e,"suffix",3,null),i=tt(e,["$$slots","$$events","$$legacy","children","prefix","suffix"]);var n=Xi();let a;var d=h(n);{var v=f=>{var m=Ki(),y=h(m);Se(y,s),E(f,m)};B(d,f=>{s()&&f(v)})}var o=g(d,2);{var c=f=>{var m=Wi(),y=h(m);Se(y,r),E(f,m)};B(o,f=>{r()&&f(c)})}var p=g(o,2);Se(p,()=>e.children),F(()=>a=at(n,a,{...i},void 0,!0,!0)),E(t,n),U()}var Zi=C("<sl-inline><sl-color-picker></sl-color-picker> </sl-inline>",2);function sr(t,e){let s=ee(e,"value",15,"white"),r=tt(e,["$$slots","$$events","$$legacy","value"]);var i=Zi(),n=h(i),a=o=>s(o.target.value);let d;var v=g(n);F(()=>{d=at(n,d,{size:"small",label:"Select a color",value:s(),"onsl-change":a,...r},void 0,!0,!0),ve(v,` ${s()??""}`)}),E(t,i)}var Ji=C('<div slot="prefix"><!></div>'),Qi=C('<div slot="suffix"><!></div>'),el=C("<sl-input><!> <!></sl-input>",2);function de(t,e){G(e,!0);let s=ee(e,"type",3,"text"),r=ee(e,"value",15),i=ee(e,"step",3,"1"),n=ee(e,"onchange",3,null),a=ee(e,"prefix",3,null),d=ee(e,"suffix",3,null),v=tt(e,["$$slots","$$events","$$legacy","type","value","step","onchange","prefix","suffix"]);var o=el(),c=w=>{if(s()=="number"){let b=w.target.value==""?0:w.target.value;b=i()=="1"?parseInt(b):parseFloat(b),e.min!=null&&(b=Math.max(b,e.min)),e.max!=null&&(b=Math.min(b,e.max)),r(w.target.value=b)}else r(w.target.value);n()&&n()(r())};let p;var f=h(o);{var m=w=>{var b=Ji(),_=h(b);Se(_,a),E(w,b)};B(f,w=>{a()&&w(m)})}var y=g(f,2);{var $=w=>{var b=Qi(),_=h(b);Se(_,d),E(w,b)};B(y,w=>{d()&&w($)})}F(()=>p=at(o,p,{type:s(),value:r(),step:i(),size:"small","onsl-change":c,...v},void 0,!0,!0)),E(t,o),U()}var tl=C("<sl-badge> </sl-badge>",2),sl=C("<sl-icon></sl-icon>",2),rl=C("<!> <sl-inline><!> <!> <!></sl-inline>",3),nl=C("<sl-input-stack>Name <!> <!></sl-input-stack> <!>",3);function il(t,e){G(e,!0);const s=oe(),r=()=>ae(i,"$project",s),i=pe("project"),n=P(()=>r().inspectAsset.first());var a=nl(),d=Y(a),v=g(h(d));de(v,{get value(){return l(n).name},set value(p){l(n).name=p}});var o=g(v,2);Oe(o,17,()=>l(n).colors.records,Ce,(p,f)=>{var m=rl();const y=P(()=>l(n).colors.get(l(f)));var $=Y(m);de($,{style:"min-width:0;",get value(){return l(y).name},set value(A){l(y).name=A}});var w=g($,2),b=h(w);{var _=A=>{var j=tl();u(j,"title","Relationship count.");var D=h(j);F(()=>ve(D,l(y).relationships.length-1)),E(A,j)};B(b,A=>{l(y).relationships.length>1&&A(_)})}var k=g(b,2);sr(k,{get value(){return l(y).value},set value(A){l(y).value=A}});var x=g(k,2);Dr(x,{variant:"text",onclick:()=>r().task==null&&l(y).deactive(),children:(A,j)=>{var D=sl();u(D,"name","trash"),E(A,D)},$$slots:{default:!0}}),E(p,m)});var c=g(d,2);Dr(c,{size:"small",onclick:()=>r().task==null&&l(n).colors.set(r().database.add(Ls)),children:(p,f)=>{var m=mt("Add Color");E(p,m)},$$slots:{default:!0}}),E(t,a),U()}var Mt;class rr{constructor(e,s=null){V(this,"database",null);I(this,Mt,z("#FFFFFF"));V(this,"link",null);V(this,"value",function(){return this.link.first()?this.link.first().value:this.custom});this.database=e.database,(s==null?void 0:s.custom)!=null&&(this.custom=s.custom),this.link=new je(this,"Property",s==null?void 0:s.link),ie.bindMultiple(this,"custom")}get custom(){return l(S(this,Mt))}set custom(e){T(S(this,Mt),L(e))}serialize(){return{custom:this.custom,link:this.link.serialize()}}}Mt=new WeakMap;var Nt,Pt;class Ls extends ot{constructor(s=null){super("asset/palette/color",s);I(this,Nt,z("New Color"));I(this,Pt,z("#FFFFFF"));s&&(s.name&&(this.name=s.name),s.value&&(this.value=s.value)),ie.bindMultiple(this,"name","value")}get name(){return l(S(this,Nt))}set name(s){T(S(this,Nt),L(s))}get value(){return l(S(this,Pt))}set value(s){T(S(this,Pt),L(s))}serialize(){return{...super.serialize(),name:this.name,value:this.value}}}Nt=new WeakMap,Pt=new WeakMap;Ls.className="asset/palette/color";Ge[Ls.className]=Ls;var Ft,Rt;const Ds=class Ds extends ot{constructor(s=null){super("asset/palette",s);I(this,Ft,z("New Palette"));V(this,"colors",null);I(this,Rt,z(L({groupIndex:0,tabIndex:0})));s&&s.name&&(this.name=s.name),this.colors=new je(this,"Colors",s==null?void 0:s.colors),ie.bindMultiple(this,"name")}get name(){return l(S(this,Ft))}set name(s){T(S(this,Ft),L(s))}get inspectorState(){return l(S(this,Rt))}set inspectorState(s){T(S(this,Rt),L(s))}inspectors(){return[[{component:il,icon:Ds.icon,title:Ds.title}]].filter(s=>s)}serialize(){return{...super.serialize(),name:this.name,colors:this.colors.serialize()}}};Ft=new WeakMap,Rt=new WeakMap;let qe=Ds;qe.className="asset/palette";qe.icon="palette2";qe.title="Palette";Ge[qe.className]=qe;var qt,Vt,Bt;class dn{constructor(e,s=null){I(this,qt,z(1));I(this,Vt,z(0));I(this,Bt,z(L([0,0])));V(this,"backgroundColor",null);this.database=e.database,s&&(s.zoom!=null&&(this.zoom=s.zoom),s.rotation!=null&&(this.rotation=s.rotation),s.pan&&(this.pan=s.pan.slice())),this.backgroundColor=new rr(this,s==null?void 0:s.backgroundColor),ie.bindMultiple(this,"zoom","pan","rotation")}get zoom(){return l(S(this,qt))}set zoom(e){T(S(this,qt),L(e))}get rotation(){return l(S(this,Vt))}set rotation(e){T(S(this,Vt),L(e))}get pan(){return l(S(this,Bt))}set pan(e){T(S(this,Bt),L(e))}serialize(){return{zoom:this.zoom,rotation:this.rotation,pan:this.pan.slice(),backgroundColor:this.backgroundColor.serialize()}}}qt=new WeakMap,Vt=new WeakMap,Bt=new WeakMap;class Tr{constructor(e,s){V(this,"ctx",null);V(this,"renderDepth",0);V(this,"relativeDepth",0);V(this,"opacity",1);this.ctx=e,s&&Object.assign(this,s)}}var ll=(t,e)=>T(e,!0),al=(t,e)=>T(e,!1),ol=C('<sl-resize-observer><sl-stack><div style="height:0; width:0;"><canvas style="background:var(--sl-color-neutral-200); display:flex; border:1px solid var(--sl-color-neutral-300); box-shadow: var(--sl-shadow-large);" class="svelte-15jymit"></canvas></div></sl-stack></sl-resize-observer>',2);function pn(t,e){G(e,!0);const s=oe(),r=()=>ae(i,"$project",s),i=pe("project"),n=P(()=>r().exporter),a=P(()=>e.owner.canvas);let d=z(null),v=z(null),o=z(null),c=z(null);var p=null;function f(){if(!l(c))return;const _=new Set;e.owner.collectDepths(_),l(c).save(),l(c).clearRect(0,0,l(v).width,l(v).height),Vs(new Tr(l(c)),{position:{x:l(v).width/2+l(a).pan.x,y:l(v).height/2+l(a).pan.y},rotation:l(a).rotation,scale:{x:l(a).zoom,y:l(a).zoom}},function(){l(c).fillStyle=l(a).backgroundColor.value(),l(c).fillRect(-l(n).width/2,-l(n).height/2,l(n).width,l(n).height),Array.from(_).sort().forEach(k=>{e.owner.render(new Tr(l(c),{renderDepth:k,relativeDepth:0,opacity:1}))})}),l(c).setTransform(1,0,0,1,0,0),l(c).restore()}function m(){if(l(d)){var _=getComputedStyle(l(d).parentNode.parentNode.parentNode);l(v).width=l(d).clientWidth-parseFloat(_.paddingLeft)/2+1,l(v).height=l(d).clientHeight-parseFloat(_.paddingTop)/2+1,p&&clearTimeout(p),p=setTimeout(()=>{f()},100)}}Bi(function(){T(c,L(l(v).getContext("2d"))),m()}),Es(()=>{f()});var y=ol();te("wheel",xt,_=>{!l(o)||r().task||(l(a).zoom=Math.max(.1,l(a).zoom+_.deltaY/500))}),rt(xt,(_,k)=>Gs==null?void 0:Gs(_,k),()=>function(_,k){var x,A;_=="start"&&k.button==1?l(o)&&!r().task&&(k.ctrlKey?Re(i,se(r).task={name:"canvas/rotation",status:l(a).rotation},se(r)):Re(i,se(r).task={name:"canvas/pan"},se(r))):((x=r().task)==null?void 0:x.name)=="canvas/pan"?_=="move"?(l(a).pan=[l(a).pan.x+k.delta.x,l(a).pan.y+k.delta.y],Re(i,se(r).task={...r().task,status:`[${l(a).pan.x}, ${l(a).pan.y}]`},se(r))):_=="end"&&Re(i,se(r).task=null,se(r)):((A=r().task)==null?void 0:A.name)=="canvas/rotation"&&(_=="move"?(l(a).rotation=l(a).rotation+k.delta.x,Re(i,se(r).task={...r().task,status:l(a).rotation+"°"},se(r))):_=="end"&&Re(i,se(r).task=null,se(r)))});var $=h(y);u($,"style","overflow:hidden;");var w=h($),b=h(w);b.__mouseover=[ll,o],b.__mouseout=[al,o],tr(b,_=>T(v,_),()=>l(v)),tr($,_=>T(d,_),()=>l(d)),F(()=>Et(b,"focused",l(o))),te("sl-resize",y,()=>m()),E(t,y),U()}_t(["mouseover","mouseout"]);var cl=(t,e,s,r)=>e().editAsset.clearAndSet(l(r)),ul=C("<sl-inline><sl-button><sl-icon></sl-icon> </sl-button></sl-inline> <!>",3);function fl(t,e){G(e,!0);const s=oe(),r=()=>ae(i,"$project",s),i=pe("project"),n=P(()=>r().editAsset.first());var a=ul(),d=Y(a);u(d,"style","padding: var(--sl-spacing-2x-small);");var v=h(d);u(v,"aria-hidden","true"),u(v,"size","small"),u(v,"variant","text"),u(v,"style","margin:auto;"),v.__click=[cl,r,i,n];var o=h(v),c=g(o),p=g(d,2);pn(p,{get owner(){return l(n)}}),F(()=>{u(o,"name",l(n).constructor.icon),ve(c,` ${l(n).name??""}`)}),E(t,a),U()}_t(["click"]);var vl=C('<div slot="prefix" class="_color-preview svelte-1xt68za"></div>'),dl=C('<sl-option><sl-inline><div class="_color-preview svelte-1xt68za"></div> </sl-inline></sl-option>',2),pl=C("<small> </small> <!>",1),hl=C("<sl-select><!> <!></sl-select>",2),_l=(t,e,s)=>{e().link.records.length==0&&l(s)[0].colors.records.length>0?e().link.clearAndSet(l(s)[0].colors.get(l(s)[0].colors.records[0])):e().link.clear()},ml=C("<sl-inline><!> <sl-button><sl-icon></sl-icon></sl-button></sl-inline>",2);function nr(t,e){G(e,!0);const s=oe(),r=()=>ae(n,"$project",s);let i=ee(e,"linkedColor",7);const n=pe("project");let a=P(()=>i().link.records.length>0),d=P(()=>r().assets.records.map(f=>r().assets.get(f)).filter(f=>f.constructor.className=="asset/palette"&&f.colors.records.length>0));var v=we(),o=Y(v);{var c=f=>{var m=ml();u(m,"style","flex-wrap:nowrap;");var y=h(m);{var $=k=>{var x=hl();F(()=>{var O;return u(x,"value",(O=i().link.records[0])==null?void 0:O.toString())}),u(x,"size","small");var A=h(x);{var j=O=>{var M=vl();const q=P(()=>`background-color:${i().link.first().value??""};`);F(()=>Os(M,"style",l(q))),E(O,M)};B(A,O=>{i().link.records.length>0&&O(j)})}var D=g(A,2);Oe(D,17,()=>l(d),Ce,(O,M)=>{var q=pl(),X=Y(q),H=h(X),le=g(X,2);Oe(le,17,()=>l(M).colors.records,Ce,(J,re)=>{var ce=dl();const ue=P(()=>l(M).colors.get(l(re)));F(()=>u(ce,"value",l(re).toString()));var N=h(ce);u(N,"class","_color-option flex-nowrap text-nowrap svelte-1xt68za");var Q=h(N),ne=g(Q);F(()=>{Os(Q,"style",`background-color:${l(ue).value??""};`),ve(ne,` ${l(ue).name??""}`)}),E(J,ce)}),F(()=>ve(H,l(M).name)),E(O,q)}),te("sl-change",x,O=>i().link.clearAndSet(r().database.get(O.target.value))),E(k,x)},w=k=>{sr(k,{opacity:!0,get value(){return i().custom},set value(x){i().custom=x}})};B(y,k=>{l(a)?k($):k(w,!1)})}var b=g(y,2);u(b,"aria-hidden","true"),u(b,"size","small"),b.__click=[_l,i,d];var _=h(b);u(_,"name","palette2"),F(()=>u(b,"variant",l(a)?"primary":"default")),E(f,m)},p=f=>{sr(f,{opacity:!0,get value(){return i().custom},set value(m){i().custom=m}})};B(o,f=>{l(d).length>0?f(c):f(p,!1)})}E(t,v),U()}_t(["click"]);var gl=C("<small>X</small>"),yl=C("<small>Y</small>"),bl=C("<small>Z</small>"),wl=C("<sl-stack><!> <!> <!></sl-stack>",2);function ir(t,e){G(e,!0);let s=ee(e,"value",15),r=tt(e,["$$slots","$$events","$$legacy","value"]);function i(c,p){var f=s().slice();f[c]=p,s(f)}var n=wl();u(n,"class","nogap"),u(n,"style","min-width: 0;");var a=h(n);de(a,ws({type:"number",class:"vertical-merge",get value(){return s().x},onchange:p=>i(0,p)},()=>r,{style:"min-width:0;",suffix:p=>{var f=gl();E(p,f)},$$slots:{suffix:!0}}));var d=g(a,2);de(d,ws({type:"number",class:"vertical-merge",get value(){return s().y},onchange:p=>i(1,p)},()=>r,{style:"min-width:0;",suffix:p=>{var f=yl();E(p,f)},$$slots:{suffix:!0}}));var v=g(d,2);{var o=c=>{de(c,ws({type:"number",class:"vertical-merge",get value(){return s().z},onchange:f=>i(2,f)},()=>r,{style:"min-width:0;",suffix:f=>{var m=bl();E(f,m)},$$slots:{suffix:!0}}))};B(v,c=>{s().length==3&&c(o)})}E(t,n),U()}var xl=C("<sl-input-stack>Background <!> Zoom <!> Rotation <!> Pan <!></sl-input-stack>",2);function hn(t,e){G(e,!0);const s=ee(e,"owner",7);var r=xl(),i=g(h(r));nr(i,{get linkedColor(){return s().canvas.backgroundColor}});var n=g(i,2);de(n,{type:"number",step:"0.01",min:.1,get value(){return s().canvas.zoom},set value(v){s().canvas.zoom=v}});var a=g(n,2);de(a,{type:"number",get value(){return s().canvas.rotation},set value(v){s().canvas.rotation=v}});var d=g(a,2);ir(d,{get value(){return s().canvas.pan},set value(v){s().canvas.pan=v}}),E(t,r),U()}var kl=C("<sl-input-stack>Name <!> Length <!></sl-input-stack>",2);function El(t,e){G(e,!0);const s=oe(),r=()=>ae(i,"$project",s),i=pe("project"),n=P(()=>r().inspectAsset.first());var a=kl(),d=g(h(a));de(d,{get value(){return l(n).name},set value(o){l(n).name=o}});var v=g(d,2);de(v,{type:"number",min:1,get value(){return l(n).numFrames},set value(o){l(n).numFrames=o}}),E(t,a),U()}Vn();var Gt,Ir;let $l=(Ir=class extends ot{constructor(s,r){super(s,r);I(this,Gt,z("New Layer"));r&&r.name&&(this.name=r.name),ie.bindMultiple(this,"name")}get name(){return l(S(this,Gt))}set name(s){T(S(this,Gt),L(s))}serialize(){return{...super.serialize(),name:this.name}}},Gt=new WeakMap,Ir);class it extends $l{constructor(s){super("movieclip/layer/group",{name:"New Group",...s});V(this,"layers",null);this.layers=new je(this,"Layers",s.layers)}serialize(){return{...super.serialize(),layers:this.layers.serialize()}}}it.className="movieclip/layer/group";it.icon="layers-half";it.title="Layer Group";Ge[it.className]=it;var Al=C("<sl-dropdown><sl-icon></sl-icon> <sl-menu><sl-menu-item><sl-icon></sl-icon> Layer Group</sl-menu-item></sl-menu></sl-dropdown>",2),Sl=C("<sl-tree-item><sl-inline><sl-icon></sl-icon> <!></sl-inline> <!></sl-tree-item>",2),jl=C("<sl-scrollview><sl-scrollview-wrapper><sl-stack><sl-tree><sl-tree-item><sl-icon></sl-icon> Animations <sl-tree-item><sl-icon></sl-icon> Birch</sl-tree-item> <sl-tree-item>Maple <sl-tree-item>Field maple</sl-tree-item> <sl-tree-item>Red maple</sl-tree-item> <sl-tree-item>Sugar maple</sl-tree-item></sl-tree-item> <sl-tree-item>Oak</sl-tree-item></sl-tree-item></sl-tree> <sl-tree><sl-tree-item><sl-icon></sl-icon> Audio Tracks</sl-tree-item></sl-tree> <sl-tree><sl-tree-item><sl-icon></sl-icon> Graphic Tracks</sl-tree-item></sl-tree> <sl-tree><sl-tree-item><sl-icon></sl-icon> Layers <!> <!></sl-tree-item></sl-tree></sl-stack></sl-scrollview-wrapper></sl-scrollview>",2);function Cl(t,e){G(e,!0);const s=oe(),r=()=>ae(i,"$project",s),i=pe("project"),n=P(()=>r().editAsset.first());var a=we(),d=Y(a);{var v=o=>{var c=jl(),p=h(c),f=h(p),m=h(f);u(m,"style","--indent-guide-width: 1px;"),u(m,"selection","leaf");var y=h(m),$=h(y);u($,"name","calendar3-range");var w=g($,2),b=h(w);u(b,"name","file-earmark-play");var _=g(w,2);u(_,"expanded",!0),g(_,2);var k=g(m,2);u(k,"style","--indent-guide-width: 1px;"),u(k,"selection","leaf");var x=h(k);u(x,"non-selectable",!0);var A=h(x);u(A,"name","music-note-list");var j=g(k,2);u(j,"style","--indent-guide-width: 1px;"),u(j,"selection","leaf");var D=h(j);u(D,"non-selectable",!0);var O=h(D);u(O,"name","circle-square");var M=g(j,2);u(M,"style","--indent-guide-width: 1px;");{const J=(ce,ue=ge)=>{var N=Al();u(N,"style","margin-left: auto; margin-right: var(--sl-spacing-small);");var Q=h(N);u(Q,"slot","trigger"),u(Q,"name","plus");var ne=g(Q,2),De=h(ne),xe=h(De);u(xe,"slot","prefix"),rt(N,ke=>fe==null?void 0:fe(ke)),F(()=>u(xe,"name",it.icon)),te("sl-select",De,()=>r().task==null&&ue().layers.set(r().database.add(it))),E(ce,N)},re=(ce,ue=ge)=>{var N=we(),Q=Y(N);Oe(Q,17,()=>ue().records,Ce,(ne,De)=>{var xe=Sl();const ke=P(()=>ue().get(l(De))),Ue=P(()=>l(n).selectedLayer.first()==l(ke));var Fe=h(xe);u(Fe,"style","flex: 1; flex-wrap:nowrap;");var Ye=h(Fe),st=g(Ye),Bs=g(st);{var Z=Ee=>{J(Ee,()=>l(ke))};B(Bs,Ee=>{l(Ue)&&Ee(Z)})}var He=g(Fe,2);re(He,()=>l(ke).layers),F(()=>{u(xe,"selected",l(Ue)),u(xe,"data-id",l(De)),u(Ye,"name",l(ke).constructor.icon),ve(st,` ${l(ke).name??""} `)}),E(ne,xe)}),E(ce,N)};var q=h(M);u(q,"non-selectable",!0);var X=h(q);u(X,"name","layers-fill");var H=g(X,2);J(H,()=>l(n));var le=g(H,2);re(le,()=>l(n).layers)}te("sl-selection-change",k,J=>{r().task==null&&J.target.querySelectorAll("sl-tree-item[non-selectable]").forEach(re=>re.selected=!1)}),te("sl-selection-change",j,J=>{r().task==null&&J.target.querySelectorAll("sl-tree-item[non-selectable]").forEach(re=>re.selected=!1)}),te("sl-selection-change",M,J=>{if(r().task==null&&(J.target.querySelectorAll("sl-tree-item[non-selectable]").forEach(re=>re.selected=!1),J.detail.selection.length>0)){const re=r().database.get(J.detail.selection[0].getAttribute("data-id"));re&&l(n).selectedLayer.clearAndSet(re)}}),E(o,c)};B(d,o=>{l(n)&&o(v)})}E(t,a),U()}function Ol(t){var e=mt("TODO: movieclip timeline");E(t,e)}var Ut,Yt,Ht;const wt=class wt extends ot{constructor(s=null){super(wt.className,s);V(this,"canvas",null);I(this,Ut,z("New MovieClip"));I(this,Yt,z(1440));V(this,"layers",null);V(this,"selectedLayer",null);I(this,Ht,z(L({groupIndex:0,tabIndex:0})));s&&(s.name&&(this.name=s.name),s.numFrames&&(this.numFrames=s.numFrames)),this.canvas=new dn(this,s==null?void 0:s.canvas),this.layers=new je(this,"Layers",s==null?void 0:s.layers),this.selectedLayer=new je(this,"Selected Layer",s==null?void 0:s.selectedLayer),ie.bindMultiple(this,"numFrames","name")}get name(){return l(S(this,Ut))}set name(s){T(S(this,Ut),L(s))}get numFrames(){return l(S(this,Yt))}set numFrames(s){T(S(this,Yt),L(s))}get inspectorState(){return l(S(this,Ht))}set inspectorState(s){T(S(this,Ht),L(s))}inspectors(){return[[{component:El,title:wt.title,icon:wt.icon},{component:hn,title:"Canvas",icon:"easel2",props:{owner:this}}]].filter(s=>s)}render(s){Vs(s,{position:{x:0,y:0},rotation:45},()=>{s.ctx.fillStyle="green",s.ctx.fillRect(-50,-50,100,100)})}serialize(){return{...super.serialize(),canvas:this.canvas.serialize(),name:this.name,numFrames:this.numFrames,layers:this.layers.serialize(),selectedLayer:this.selectedLayer.serialize()}}};Ut=new WeakMap,Yt=new WeakMap,Ht=new WeakMap;let he=wt;he.className="asset/mc";he.icon="film";he.title="Movie Clip";he.editor={component:fl,title:"Canvas",icon:"easel2"};he.timeline={component:Ol,title:he.title,icon:he.icon};he.outliner={component:Cl,title:he.title,icon:he.icon};Ge[he.className]=he;var Ll=C("<sl-option><sl-icon></sl-icon> </sl-option>",2),Dl=C("<sl-inline><sl-select><!> <sl-icon></sl-icon></sl-select> <div><sl-icon></sl-icon> </div></sl-inline> <!>",3);function Tl(t,e){G(e,!0);const s=oe(),r=()=>ae(i,"$project",s),i=pe("project"),n=P(()=>r().editAsset.first()),a=[{value:"action",icon:"calendar3-range",label:"Action"},{value:"graphic",icon:"circle-square",label:"Graphic"}],d=P(()=>a.find(b=>b.value==l(n).mode));var v=Dl(),o=Y(v);u(o,"style","padding: var(--sl-spacing-small) 0px;");var c=h(o);u(c,"size","small");var p=h(c);Oe(p,17,()=>a,Ce,(b,_)=>{var k=Ll(),x=h(k);u(x,"slot","prefix");var A=g(x);F(()=>{u(k,"value",l(_).value),u(x,"name",l(_).icon),ve(A,` ${l(_).label??""}`)}),E(b,k)});var f=g(p,2);u(f,"slot","prefix");var m=g(c,2),y=h(m),$=g(y),w=g(o,2);pn(w,{get owner(){return l(n)}}),F(()=>{u(c,"value",l(n).mode),u(f,"name",l(d).icon),u(y,"name",l(n).constructor.icon),ve($,` ${l(n).name??""}`)}),te("sl-change",c,b=>l(n).mode=b.target.value),E(t,v),U()}var zl=C("<sl-input-stack>Name <!></sl-input-stack>",2);function Il(t,e){G(e,!0);const s=oe(),r=()=>ae(i,"$project",s),i=pe("project"),n=P(()=>r().inspectAsset.first());var a=zl(),d=g(h(a));de(d,{get value(){return l(n).name},set value(v){l(n).name=v}}),E(t,a),U()}function Ml(t){var e=mt("TODO: Vector Styles");E(t,e)}var Nl=C("<sl-radio-group><!></sl-radio-group>",2);function zr(t,e){G(e,!0);let s=ee(e,"value",15),r=ee(e,"onchange",3,null),i=tt(e,["$$slots","$$events","$$legacy","value","children","onchange"]);var n=Nl(),a=o=>{s(o.target.value),r()&&r()(s())};let d;var v=h(n);Se(v,()=>e.children),F(()=>d=at(n,d,{value:s(),size:"small","onsl-change":a,...i},void 0,!0,!0)),E(t,n),U()}var Pl=C("<sl-stack><sl-range></sl-range></sl-stack>",2);function Fl(t,e){G(e,!0);let s=ee(e,"value",15),r=ee(e,"step",3,"1"),i=ee(e,"onchange",3,null),n=tt(e,["$$slots","$$events","$$legacy","value","step","onchange"]);var a=Pl(),d=h(a),v=c=>{let p=c.target.value==""?0:c.target.value;p=r()=="1"?parseInt(p):parseFloat(p),e.min!=null&&(p=Math.max(p,e.min)),e.max!=null&&(p=Math.min(p,e.max)),s(c.target.value=p),i()&&i()(s())};let o;F(()=>o=at(d,o,{value:s(),step:r(),size:"small",style:"width: calc(100% - 10px); --thumb-size: var(--sl-spacing-small); --track-color-inactive: var(--sl-color-neutral-100); --track-color-active: var(--sl-color-primary-200);","onsl-change":v,...n},void 0,!0,!0)),E(t,a),U()}var Rl=C('<div slot="prefix"><!></div>'),ql=C('<div slot="suffix"><!></div>'),Vl=C("<sl-select><!> <!> <!></sl-select>",2);function _n(t,e){G(e,!0);let s=ee(e,"value",15),r=ee(e,"onchange",3,null),i=ee(e,"prefix",3,null),n=ee(e,"suffix",3,null),a=tt(e,["$$slots","$$events","$$legacy","value","children","onchange","prefix","suffix"]);var d=Vl(),v=$=>{s($.target.value),r()&&r()(s())};let o;var c=h(d);{var p=$=>{var w=Rl(),b=h(w);Se(b,i),E($,w)};B(c,$=>{i()&&$(p)})}var f=g(c,2);{var m=$=>{var w=ql(),b=h(w);Se(b,n),E($,w)};B(f,$=>{n()&&$(m)})}var y=g(f,2);Se(y,()=>e.children),F(()=>o=at(d,o,{value:s(),size:"small","onsl-change":v,...a},void 0,!0,!0)),E(t,d),U()}var Bl=C("<sl-switch><!></sl-switch>",2);function Gl(t,e){G(e,!0);let s=ee(e,"checked",15,!1),r=ee(e,"children",3,null),i=tt(e,["$$slots","$$events","$$legacy","checked","children"]);var n=Bl(),a=c=>s(c.target.checked);let d;var v=h(n);{var o=c=>{var p=we(),f=Y(p);Se(f,r),E(c,p)};B(v,c=>{r()&&c(o)})}F(()=>d=at(n,d,{size:"small",checked:s(),"onsl-change":a,...i},void 0,!0,!0)),E(t,n),U()}var Ul=C("<sl-radio-button>Visible</sl-radio-button> <sl-radio-button>Translucent</sl-radio-button> <sl-radio-button>Hidden</sl-radio-button>",3),Yl=C("<sl-option> </sl-option>",2),Hl=C("<sl-radio-button>Bypass</sl-radio-button> <sl-radio-button>Off</sl-radio-button> <sl-radio-button>Low</sl-radio-button> <sl-radio-button>Medium</sl-radio-button> <sl-radio-button>High</sl-radio-button>",3),Kl=C("<sl-input-stack>Name <!></sl-input-stack> <sl-input-stack>Position <!> Scale <!> Rotation <!></sl-input-stack> <sl-input-stack>Render <!> Visibility <!> Blend Modes <!> Opacity <!> Depth Offset <!> Image Smooth <!></sl-input-stack>",3);function mn(t,e){G(e,!0);let s=ee(e,"layer",7);const r=["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","copy","xor","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"].sort();var i=Kl(),n=Y(i),a=g(h(n));de(a,{get value(){return s().name},set value(_){s().name=_}});var d=g(n,2),v=g(h(d));ir(v,{step:"0.01",get value(){return s().position},set value(_){s().position=_}});var o=g(v,2);ir(o,{step:"0.01",get value(){return s().scale},set value(_){s().scale=_}});var c=g(o,2);de(c,{type:"number",step:"0.01",get value(){return s().rotation},set value(_){s().rotation=_}});var p=g(d,2),f=g(h(p));Gl(f,{get checked(){return s().renderable},set checked(_){s().renderable=_}});var m=g(f,2);zr(m,{get value(){return s().visibility},set value(_){s().visibility=_},children:(_,k)=>{var x=Ul(),A=Y(x);u(A,"value","visible");var j=g(A,2);u(j,"value","translucent");var D=g(j,2);u(D,"value","hidden"),E(_,x)},$$slots:{default:!0}});var y=g(m,2);_n(y,{get value(){return s().blendMode},set value(_){s().blendMode=_},children:(_,k)=>{var x=we(),A=Y(x);Oe(A,17,()=>r,Ce,(j,D)=>{var O=Yl(),M=h(O);F(()=>{u(O,"value",l(D)),ve(M,l(D))}),E(j,O)}),E(_,x)},$$slots:{default:!0}});var $=g(y,2);Fl($,{type:"number",min:"0",max:"1",step:"0.01",get value(){return s().opacity},set value(_){s().opacity=_}});var w=g($,2);de(w,{type:"number",get value(){return s().depth},set value(_){s().depth=_}});var b=g(w,2);zr(b,{get value(){return s().imageSmooth},set value(_){s().imageSmooth=_},children:(_,k)=>{var x=Hl(),A=Y(x);u(A,"value","bypass");var j=g(A,2);u(j,"value","off");var D=g(j,2);u(D,"value","low");var O=g(D,2);u(O,"value","medium");var M=g(O,2);u(M,"value","high"),E(_,x)},$$slots:{default:!0}}),E(t,i),U()}var Wl=C("<sl-option> </sl-option>",2),Xl=C("<sl-option>Draw all the children</sl-option> <!>",3),Zl=C("<sl-input-stack>Switch <!></sl-input-stack>",2);function Jl(t,e){G(e,!0);const s=ee(e,"layer",7);var r=Zl(),i=g(h(r));_n(i,{get value(){return s().switchChildID},set value(n){s().switchChildID=n},children:(n,a)=>{var d=Xl(),v=Y(d);u(v,"value","");var o=g(v,2);Oe(o,17,()=>s().layers.records,Ce,(c,p)=>{var f=Wl();const m=P(()=>s().layers.get(l(p)));F(()=>u(f,"value",l(p).toString()));var y=h(f);F(()=>ve(y,l(m).name)),E(c,f)}),E(n,d)},$$slots:{default:!0}}),E(t,r),U()}function gn(t){var e=mt("TODO: modifiers");E(t,e)}var Kt,Wt,Xt,Zt,Jt,Qt,es,ts,ss,rs;class yn extends ot{constructor(s,r){super(s,r);I(this,Kt,z(""));I(this,Wt,z("bypass"));I(this,Xt,z(!0));I(this,Zt,z("visible"));I(this,Jt,z(1));I(this,Qt,z(0));I(this,es,z("source-over"));I(this,ts,z(L([0,0])));I(this,ss,z(L([1,1])));I(this,rs,z(0));V(this,"modifiers",null);r!=null&&r.name&&(this.name=r.name),r!=null&&r.position&&(this.position=r.position.slice()),r!=null&&r.scale&&(this.scale=r.slice()),r!=null&&r.rotation&&(this.rotation=r.rotation),r!=null&&r.depth&&(this.depth=r.depth),r!=null&&r.renderable&&(this.renderable=r.renderable),r!=null&&r.visibility&&(this.visibility=r.visibility),r!=null&&r.opacity&&(this.opacity=r.opacity),r!=null&&r.imageSmooth&&(this.opacity=r.imageSmooth),r!=null&&r.blendMode&&(this.blendMode=r.blendMode),this.modifiers=new je(this,"Modifiers",r==null?void 0:r.modifiers),ie.bindMultiple(this,"name","position","scale","rotation","depth","renderable","visibility","opacity","imageSmooth","blendMode")}get name(){return l(S(this,Kt))}set name(s){T(S(this,Kt),L(s))}get imageSmooth(){return l(S(this,Wt))}set imageSmooth(s){T(S(this,Wt),L(s))}get renderable(){return l(S(this,Xt))}set renderable(s){T(S(this,Xt),L(s))}get visibility(){return l(S(this,Zt))}set visibility(s){T(S(this,Zt),L(s))}get opacity(){return l(S(this,Jt))}set opacity(s){T(S(this,Jt),L(s))}get depth(){return l(S(this,Qt))}set depth(s){T(S(this,Qt),L(s))}get blendMode(){return l(S(this,es))}set blendMode(s){T(S(this,es),L(s))}get position(){return l(S(this,ts))}set position(s){T(S(this,ts),L(s))}get scale(){return l(S(this,ss))}set scale(s){T(S(this,ss),L(s))}get rotation(){return l(S(this,rs))}set rotation(s){T(S(this,rs),L(s))}serialize(){return{...super.serialize(),name:this.name,position:this.position.slice(),rotation:this.rotation,modifiers:this.modifiers.serialize(),depth:this.depth,renderable:this.renderable,visibility:this.visibility,opacity:this.opacity,imageSmooth:this.imageSmooth,blendMode:this.blendMode,scale:this.scale.slice()}}}Kt=new WeakMap,Wt=new WeakMap,Xt=new WeakMap,Zt=new WeakMap,Jt=new WeakMap,Qt=new WeakMap,es=new WeakMap,ts=new WeakMap,ss=new WeakMap,rs=new WeakMap;var ns;class Qe extends yn{constructor(s){super("layer/folder",{...s,name:"New Folder"});I(this,ns,z(""));V(this,"layers",null);s!=null&&s.switchChildID&&(this.switchChildID=s.switchChildID),this.layers=new je(this,"Layers",s==null?void 0:s.layers),ie.bindMultiple(this,"switchChildID")}get switchChildID(){return l(S(this,ns))}set switchChildID(s){T(S(this,ns),L(s))}inspectors(){return[{component:Jl,title:"Folder",icon:"folder-fill",props:{layer:this}},{component:mn,title:"Layer",icon:"layers",props:{layer:this}},{component:gn,title:"Modifiers",icon:"wrench-adjustable"}].filter(s=>s)}collectDepths(s,r){var n;const i=r+this.depth;for(let a of this.layers.records.slice().reverse())(n=this.layers.get(a))==null||n.collectDepths(s,i)}render(s){this.visibility!="hidden"&&(s.relativeDepth+=this.depth,Vs(s,{position:this.position,rotation:this.rotation,scale:this.scale,blendMode:this.blendMode,opacity:this.opacity*(this.visibility=="translucent"?.2:1)},()=>{var r,i;if(this.switchChildID)(r=this.layers.get(this.switchChildID))==null||r.render(s);else for(let n of this.layers.records.slice().reverse())(i=this.layers.get(n))==null||i.render(s)}),s.relativeDepth-=this.depth)}serialize(){return{...super.serialize(),switchChildID:this.switchChildID,layers:this.layers.serialize()}}}ns=new WeakMap;Qe.className="layer/folder";Qe.icon="folder-fill";Qe.title="Folder";Ge[Qe.className]=Qe;var Ql=C("<sl-input-stack>Fill Color <!> Stroke Color <!> TODO: remover component, fillColor e strokeColor</sl-input-stack>",2);function ea(t,e){G(e,!0);var s=Ql(),r=g(h(s));nr(r,{get linkedColor(){return e.layer.fillColor}});var i=g(r,2);nr(i,{get linkedColor(){return e.layer.strokeColor}}),E(t,s),U()}function ta(t){var e=mt("TODO: shapes");E(t,e)}class Ve extends yn{constructor(s){super("layer/vector",{...s,name:"New Vector"});V(this,"fillColor",null);V(this,"strokeColor",null);this.fillColor=new rr(this,(s==null?void 0:s.fillColor)??{custom:"#FFFFFF"}),this.strokeColor=new rr(this,(s==null?void 0:s.strokeColor)??{custom:"#000000"})}inspectors(){return[{component:mn,title:"Layer",icon:"layers",props:{layer:this}},{component:ea,title:"Style",icon:"palette",props:{layer:this}},{component:ta,title:"Shapes",icon:"bounding-box-circles"},{component:gn,title:"Modifiers",icon:"wrench-adjustable"}].filter(s=>s)}serialize(){return{...super.serialize()}}collectDepths(s,r){s.add(r+this.depth)}render(s){s.renderDepth!=s.relativeDepth+this.depth||this.visibility=="hidden"||Vs(s,{position:this.position,rotation:this.rotation,scale:this.scale,blendMode:this.blendMode,opacity:this.opacity*(this.visibility=="translucent"?.2:1),imageSmooth:this.imageSmooth},()=>{s.ctx.fillStyle=this.fillColor.value(),s.ctx.strokeStyle=this.strokeColor.value(),s.ctx.beginPath(),s.ctx.rect(-50,-50,100,100),s.ctx.fill(),s.ctx.stroke()})}}Ve.className="layer/vector";Ve.icon="pentagon";Ve.title="Vector Layer";Ge[Ve.className]=Ve;var sa=C("<sl-dropdown><sl-icon></sl-icon> <sl-menu><sl-menu-item><sl-icon></sl-icon> Add Folder</sl-menu-item> <sl-menu-item><sl-icon></sl-icon> Add Vector</sl-menu-item></sl-menu></sl-dropdown>",2),ra=C("<sl-tree-item><sl-inline><sl-icon></sl-icon> <!></sl-inline> <!></sl-tree-item>",2),na=C("<sl-stack><sl-tree><sl-tree-item><sl-icon></sl-icon> Layers <!> <!></sl-tree-item></sl-tree></sl-stack>",2);function ia(t,e){G(e,!0);const s=oe(),r=()=>ae(a,"$project",s),i=(m,y=ge)=>{var $=sa();u($,"style","margin-left: auto; margin-right: var(--sl-spacing-small);");var w=h($);u(w,"slot","trigger"),u(w,"name","caret-down-fill");var b=g(w,2),_=h(b),k=h(_);u(k,"slot","prefix");var x=g(_,2),A=h(x);u(A,"slot","prefix"),rt($,j=>fe==null?void 0:fe(j)),F(()=>{u(k,"name",Qe.icon),u(A,"name",Ve.icon)}),te("sl-select",_,()=>r().task==null&&y().set(r().database.add(Qe))),te("sl-select",x,()=>r().task==null&&y().set(r().database.add(Ve))),E(m,$)},n=(m,y=ge)=>{var $=we(),w=Y($);Oe(w,17,()=>y().records,Ce,(b,_)=>{var k=ra();const x=P(()=>y().get(l(_))),A=P(()=>e.owner.editLayers.includes(l(x)));var j=h(k);u(j,"style","flex: 1; flex-wrap:nowrap;"),u(j,"class","_item svelte-19u3wde");var D=h(j),O=g(D),M=g(O);{var q=le=>{i(le,()=>l(x).layers)};B(M,le=>{l(A)&&le(q)})}var X=g(j,2);{var H=le=>{n(le,()=>l(x).layers)};B(X,le=>{l(x).layers!=null&&le(H)})}F(()=>{u(k,"data-id",l(_)),Et(j,"active",l(A)),u(D,"name",l(x).constructor.icon),ve(O,` ${l(x).name??""} `)}),E(b,k)}),E(m,$)},a=pe("project");var d=na(),v=h(d);u(v,"style","--indent-guide-width: 1px;");var o=h(v);u(o,"non-selectable",!0),u(o,"expanded",!0);var c=h(o);u(c,"name","circle-square");var p=g(c,2);i(p,()=>e.owner.layers);var f=g(p,2);n(f,()=>e.owner.layers),te("sl-selection-change",v,m=>{if(r().task==null&&(m.target.querySelectorAll("sl-tree-item[non-selectable]").forEach(y=>y.selected=!1),m.detail.selection.length>0)){const y=r().database.get(m.detail.selection[0].getAttribute("data-id"));y&&e.owner.editLayers.clearAndSet(y)}}),E(t,d),U()}var la=C("<sl-tree><sl-tree-item><sl-icon></sl-icon> Actions</sl-tree-item></sl-tree>",2),aa=C("<sl-stack><sl-tree><sl-tree-item><sl-icon></sl-icon> Vector Styles <sl-tree-item><sl-icon></sl-icon> TODO</sl-tree-item></sl-tree-item></sl-tree></sl-stack> <!>",3),oa=C("<sl-scrollview><sl-scrollview-wrapper><sl-stack><!></sl-stack></sl-scrollview-wrapper></sl-scrollview>",2);function ca(t,e){G(e,!0);const s=oe(),r=()=>ae(i,"$project",s),i=pe("project"),n=P(()=>r().editAsset.first());var a=we(),d=Y(a);{var v=o=>{var c=oa(),p=h(c),f=h(p),m=h(f);{var y=w=>{var b=la();u(b,"style","--indent-guide-width: 1px;"),u(b,"selection","leaf");var _=h(b);u(_,"expanded",!0);var k=h(_);u(k,"name","calendar3-range"),E(w,b)},$=w=>{var b=we(),_=Y(b);{var k=x=>{var A=aa(),j=Y(A);u(j,"style","flex:0;");var D=h(j);u(D,"style","--indent-guide-width: 1px;");var O=h(D);u(O,"non-selectable",!0),u(O,"expanded",!0);var M=h(O);u(M,"name","palette");var q=g(M,2);u(q,"non-selectable",!0),u(q,"expanded",!0);var X=h(q);u(X,"name","palette-fill");var H=g(j,2);ia(H,{get owner(){return l(n)}}),E(x,A)};B(_,x=>{l(n).mode=="graphic"&&x(k)},!0)}E(w,b)};B(m,w=>{l(n).mode=="action"?w(y):w($,!1)})}E(o,c)};B(d,o=>{l(n)&&o(v)})}E(t,a),U()}function ua(t,e){G(e,!0);const s=oe(),r=()=>ae(i,"$project",s),i=pe("project"),n=P(()=>r().editAsset.first());var a=we(),d=Y(a);{var v=o=>{var c=mt("TODO: action timeline");E(o,c)};B(d,o=>{l(n).mode=="action"&&o(v)})}E(t,a),U()}var is,ls,as;const Ts=class Ts extends ot{constructor(s=null){super("asset/object",s);V(this,"canvas",null);I(this,is,z("New Object"));I(this,ls,z("graphic"));V(this,"layers",null);V(this,"editLayers",null);I(this,as,z(L({groupIndex:0,tabIndex:0})));s!=null&&s.name&&(this.name=s.name),s!=null&&s.mode&&(this.mode=s.mode),this.canvas=new dn(this,s==null?void 0:s.canvas),this.layers=new je(this,"Layers",s==null?void 0:s.layers),this.editLayers=new je(this,"Edit",s==null?void 0:s.editLayers),ie.bindMultiple(this,"name")}get name(){return l(S(this,is))}set name(s){T(S(this,is),L(s))}get mode(){return l(S(this,ls))}set mode(s){T(S(this,ls),L(s))}get inspectorState(){return l(S(this,as))}set inspectorState(s){T(S(this,as),L(s))}inspectors(){return[...this.mode=="graphic"?this.editLayers.records.map(s=>{var r;return(r=this.editLayers.get(s))==null?void 0:r.inspectors()}).filter(s=>s):[],[{component:Il,title:Ts.title,icon:Ts.icon},{component:Ml,title:"Vector Styles",icon:"palette"},{component:hn,title:"Canvas",icon:"easel2",props:{owner:this}}]].filter(s=>s)}collectDepths(s){var r;for(let i of this.layers.records)(r=this.layers.get(i))==null||r.collectDepths(s,0)}render(s){var r;for(let i of this.layers.records.slice().reverse())(r=this.layers.get(i))==null||r.render(s)}serialize(){return{...super.serialize(),canvas:this.canvas.serialize(),name:this.name,mode:this.mode,layers:this.layers.serialize(),editLayers:this.editLayers.serialize()}}};is=new WeakMap,ls=new WeakMap,as=new WeakMap;let _e=Ts;_e.className="asset/object";_e.icon="boxes";_e.title="Object";_e.outliner={component:ca,title:_e.title,icon:_e.icon};_e.timeline={component:ua,title:_e.title,icon:_e.icon};_e.editor={component:Tl,title:"Canvas",icon:"easel2"};Ge[_e.className]=_e;var os,cs;class Us{constructor(e=null){I(this,os,z("New Project"));V(this,"exporter",new Lr);I(this,cs,z(null));V(this,"database",new Or);V(this,"assets",null);V(this,"editAsset",null);V(this,"inspectAsset",null);e&&(e.name&&(this.name=e.name),e.exporter&&(this.exporter=new Lr(e.exporter)),e.database&&(this.database=new Or(e.database))),this.assets=new je(this,"Assets",e==null?void 0:e.assets),this.editAsset=new je(this,"Asset Edit",e==null?void 0:e.editAsset),this.inspectAsset=new je(this,"Asset Inspect",e==null?void 0:e.inspectAsset),this.assets.records.length==0&&setTimeout(()=>{const s=this.database.add(he,{name:"Scene Example"});this.assets.set(s);const r=this.database.add(_e,{name:"Object Example"});this.assets.set(r),this.inspectAsset.set(this.editAsset.set(r)),r.editLayers.set(r.layers.set(this.database.add(Ve,{fillColor:{custom:"#ff000093"}}))),r.layers.set(this.database.add(Qe)).layers.set(this.database.add(Ve,{position:[50,50]}))})}get name(){return l(S(this,os))}set name(e){T(S(this,os),L(e))}get task(){return l(S(this,cs))}set task(e){T(S(this,cs),L(e))}serialize(){return{name:this.name,exporter:this.exporter.serialize(),assets:this.assets.serialize(),editAsset:this.editAsset.serialize(),inspectAsset:this.editAsset.serialize(),database:this.database.serialize()}}}os=new WeakMap,cs=new WeakMap;var fa=C("<sl-input-stack>Name <!></sl-input-stack>",2);function va(t,e){G(e,!0);const s=oe(),r=()=>ae(i,"$project",s),i=pe("project"),n=P(()=>r().inspectAsset.first());var a=fa(),d=g(h(a));de(d,{get value(){return l(n).name},set value(v){l(n).name=v}}),E(t,a),U()}var us,fs;const zs=class zs extends ot{constructor(s=null){super("asset/folder",s);I(this,us,z("New Folder"));V(this,"assets",null);I(this,fs,z(L({groupIndex:0,tabIndex:0})));s&&s.name&&(this.name=s.name),this.assets=new je(this,"Assets",s==null?void 0:s.assets),ie.bindMultiple(this,"name")}get name(){return l(S(this,us))}set name(s){T(S(this,us),L(s))}get inspectorState(){return l(S(this,fs))}set inspectorState(s){T(S(this,fs),L(s))}inspectors(){return[[{component:va,title:zs.title,icon:zs.icon}]].filter(s=>s)}serialize(){return{...super.serialize(),name:this.name,assets:this.assets.serialize()}}};us=new WeakMap,fs=new WeakMap;let Be=zs;Be.className="asset/folder";Be.icon="folder-fill";Be.title="Asset Folder";Ge[Be.className]=Be;var da=C("<sl-menu-item><sl-icon></sl-icon> Edit</sl-menu-item>",2),pa=C("<sl-menu-item><sl-icon></sl-icon> Add Folder</sl-menu-item> <sl-menu-item><sl-icon></sl-icon> Add Object</sl-menu-item> <sl-menu-item><sl-icon></sl-icon> Add MovieClip</sl-menu-item> <sl-menu-item><sl-icon></sl-icon> Add Palette</sl-menu-item>",3),ha=C("<sl-menu-item><sl-icon></sl-icon> Relationships</sl-menu-item>",2),_a=C("<sl-menu-item><sl-icon></sl-icon> Delete</sl-menu-item>",2),ma=C("<sl-dropdown><sl-icon></sl-icon> <sl-menu><!> <!> <!> <!></sl-menu></sl-dropdown>",2),ga=C("<sl-tree-item><sl-inline><sl-icon></sl-icon> <!></sl-inline> <!></sl-tree-item>",2),ya=C("<sl-inline> <sl-icon></sl-icon> </sl-inline>",2),ba=C("<sl-stack></sl-stack>",2),wa=C("<sl-dialog><!></sl-dialog>  <sl-scrollview><sl-scrollview-wrapper><sl-tree><sl-tree-item><sl-inline><sl-icon></sl-icon> Assets <!></sl-inline> <!></sl-tree-item></sl-tree></sl-scrollview-wrapper></sl-scrollview>",3);function xa(t,e){G(e,!0);const s=oe(),r=()=>ae(a,"$project",s),i=(A,j=ge)=>{var D=ma();u(D,"style","margin-left: auto;");var O=h(D);u(O,"slot","trigger"),u(O,"name","caret-down-fill");var M=g(O,2),q=h(M);{var X=N=>{var Q=da(),ne=h(Q);u(ne,"slot","prefix"),u(ne,"name","pencil"),te("sl-select",Q,()=>{r().task==null&&r().editAsset.clearAndSet(j())}),E(N,Q)};B(q,N=>{j().constructor.editor!=null&&N(X)})}var H=g(q,2);{var le=N=>{var Q=pa(),ne=Y(Q),De=h(ne);u(De,"slot","prefix");var xe=g(ne,2),ke=h(xe);u(ke,"slot","prefix");var Ue=g(xe,2),Fe=h(Ue);u(Fe,"slot","prefix");var Ye=g(Ue,2),st=h(Ye);u(st,"slot","prefix"),F(()=>{u(De,"name",Be.icon),u(ke,"name",_e.icon),u(Fe,"name",he.icon),u(st,"name",qe.icon)}),te("sl-select",ne,()=>r().task==null&&j().assets.set(r().database.add(Be))),te("sl-select",xe,()=>r().task==null&&j().assets.set(r().database.add(_e))),te("sl-select",Ue,()=>r().task==null&&j().assets.set(r().database.add(he))),te("sl-select",Ye,()=>r().task==null&&j().assets.set(r().database.add(qe))),E(N,Q)};B(H,N=>{j().assets!=null&&N(le)})}var J=g(H,2);{var re=N=>{var Q=ha(),ne=h(Q);u(ne,"slot","prefix"),u(ne,"name","link-45deg"),te("sl-select",Q,()=>{r().task==null&&(T(v,L(j())),l(d).show())}),E(N,Q)};B(J,N=>{j().relationships!=null&&N(re)})}var ce=g(J,2);{var ue=N=>{var Q=_a(),ne=h(Q);u(ne,"slot","prefix"),u(ne,"name","trash"),te("sl-select",Q,()=>r().task==null&&j().deactive()),E(N,Q)};B(ce,N=>{j().class!=null&&N(ue)})}rt(D,N=>fe==null?void 0:fe(N)),E(A,D)},n=(A,j=ge)=>{var D=we(),O=Y(D);Oe(O,17,()=>j().records,Ce,(M,q)=>{var X=ga();const H=P(()=>j().get(l(q))),le=P(()=>r().editAsset.first()==l(H));F(()=>u(X,"selected",r().inspectAsset.first()==l(H)));var J=h(X);u(J,"class","_item svelte-19u3wde");var re=h(J),ce=g(re),ue=g(ce);i(ue,()=>l(H));var N=g(J,2);{var Q=ne=>{n(ne,()=>l(H).assets)};B(N,ne=>{l(H).assets!=null&&ne(Q)})}F(()=>{u(X,"data-id",l(q)),Et(J,"active",l(le)),u(re,"name",l(H).constructor.icon),ve(ce,` ${l(H).name??""} `)}),E(M,X)}),E(A,D)},a=pe("project");let d=z(null),v=z(null);var o=wa(),c=Y(o);u(c,"label","Relationships");var p=h(c);{var f=A=>{var j=ba();u(j,"style","overflow:auto;"),Oe(j,21,()=>l(v).relationships,Ce,(D,O)=>{var M=ya(),q=h(M),X=g(q);u(X,"name","caret-right-fill");var H=g(X);F(()=>{ve(q,`${l(O).owner.name??""}${(l(O).owner.class?` (${l(O).owner.class})`:"")??""} `),ve(H,` ${l(O).description??""}`)}),E(D,M)}),E(A,j)};B(p,A=>{l(v)&&A(f)})}tr(c,A=>T(d,A),()=>l(d));var m=g(c,2),y=h(m),$=h(y);u($,"style","--indent-guide-width: 1px; flex: 1;");var w=h($);u(w,"non-selectable",!0),u(w,"expanded",!0);var b=h(w);u(b,"style","flex: 1; flex-wrap:nowrap; padding-right: var(--sl-spacing-small);");var _=h(b);u(_,"name","archive-fill");var k=g(_,2);i(k,r);var x=g(b,2);n(x,()=>r().assets),te("sl-selection-change",$,A=>{if(r().task==null&&(A.target.querySelectorAll("sl-tree-item[non-selectable]").forEach(j=>j.selected=!1),A.detail.selection.length>0)){const j=r().database.get(A.detail.selection[0].getAttribute("data-id"));j&&r().inspectAsset.clearAndSet(j)}}),E(t,o),U()}var ka=C("<sl-scrollview><sl-scrollview-wrapper><sl-stack><sl-details>TODO</sl-details> <sl-details><sl-input-stack>FPS <!> Resolution <sl-inline><!> <!></sl-inline></sl-input-stack></sl-details> <sl-details>TODO</sl-details></sl-stack></sl-scrollview-wrapper></sl-scrollview>",2);function Ea(t,e){G(e,!0);const s=oe(),r=()=>ae(i,"$project",s),i=pe("project"),n=P(()=>r().exporter);var a=ka(),d=h(a),v=h(d);u(v,"style","padding: var(--sl-spacing-small) 0px;");var o=h(v);u(o,"summary","Presets");var c=g(o,2);u(c,"summary","Settings"),u(c,"open","true");var p=h(c),f=g(h(p));de(f,{type:"number",min:5,max:60,get value(){return l(n).fps},set value(b){l(n).fps=b}});var m=g(f,2),y=h(m);de(y,{type:"number",min:10,placeholder:"width",style:"flex: 0.5; width: 0;",get value(){return l(n).width},set value(b){l(n).width=b}});var $=g(y,2);de($,{type:"number",min:10,placeholder:"height",style:"flex: 0.5; width: 0;",get value(){return l(n).height},set value(b){l(n).height=b}});var w=g(c,2);u(w,"summary","Scenes"),u(w,"open","true"),E(t,a),U()}var $a=C('<sl-tooltip><div class="_tab svelte-th1h2k" aria-hidden="true"><sl-icon></sl-icon></div></sl-tooltip>',2),Aa=C("<!> <sl-divider></sl-divider>",3),Sa=(t,e)=>e()(),ja=C("<sl-button><sl-icon></sl-icon></sl-button>",2),Ca=C("<sl-scrollview><sl-scrollview-wrapper><sl-stack><sl-inline><b><small> </small></b> <!></sl-inline> <!></sl-stack></sl-scrollview-wrapper></sl-scrollview>",2),Oa=C("<sl-inline><sl-stack></sl-stack> <sl-stack><!></sl-stack></sl-inline>",2);function La(t,e){G(e,!0);let s=ee(e,"state",31,()=>L({groupIndex:0,tabIndex:0})),r=ee(e,"onEditClick",3,null),i=P(()=>e.tabGroups[s().groupIndex][s().tabIndex]);var n=Oa();u(n,"style","gap:0px; flex:1; border: 1px solid var(--sl-color-neutral-0); align-items:normal; flex-wrap:nowrap;");var a=h(n);u(a,"style","background-color: color-mix(in srgb, var(--sl-color-neutral-50) 50%, var(--sl-color-neutral-0) 50%); flex:0; gap:0px;"),Oe(a,21,()=>e.tabGroups,Ce,(c,p,f)=>{var m=Aa(),y=Y(m);Oe(y,17,()=>l(p),Ce,(w,b,_)=>{var k=$a();u(k,"placement","right");var x=h(k);x.__click=()=>{l(b).disabled||s({groupIndex:f,tabIndex:_})};var A=h(x);F(()=>{u(k,"content",l(b).title),Et(x,"disabled",l(b).disabled),Et(x,"active",s().groupIndex==f&&s().tabIndex==_),u(A,"name",l(b).icon)}),E(w,k)});var $=g(y,2);u($,"class","svelte-th1h2k"),E(c,m)});var d=g(a,2);u(d,"style","background-color: var(--sl-color-neutral-200); padding: var(--sl-spacing-small); height:100%;");var v=h(d);{var o=c=>{var p=Ca();const f=P(()=>l(i).component);var m=h(p),y=h(m);u(y,"style","min-width:0;");var $=h(y),w=h($),b=h(w),_=h(b),k=g(w,2);{var x=j=>{var D=ja();u(D,"size","small"),u(D,"variant","text"),u(D,"aria-hidden","true"),u(D,"style","--sl-spacing-small: 0px; margin-left:auto;"),D.__click=[Sa,r];var O=h(D);u(O,"name","pencil"),E(j,D)};B(k,j=>{r()&&j(x)})}var A=g($,2);Mi(A,()=>l(f),(j,D)=>{D(j,ws(()=>l(i).props))}),F(()=>ve(_,l(i).title)),E(c,p)};B(v,c=>{l(i)&&!l(i).disabled&&c(o)})}E(t,n),U()}_t(["click"]);var Da=(t,e,s)=>e().inspectAsset.clearAndSet(e().editAsset.first()),Ta=C("<sl-button><sl-icon></sl-icon> Return to the asset being edited</sl-button>",2),za=C("<sl-stack><!> <!></sl-stack>",2);function Ia(t,e){G(e,!0);const s=oe(),r=()=>ae(i,"$project",s),i=pe("project");let n=P(function(){var o;return(o=r().inspectAsset.first())!=null&&o.inspectors?r().inspectAsset.first():null});var a=we(),d=Y(a);{var v=o=>{var c=za();u(c,"style","margin-top: var(--sl-spacing-small);");var p=h(c),f=P(()=>l(n).inspectors()),m=P(()=>r().editAsset.first()!=r().inspectAsset.first()?()=>{r().task==null&&r().editAsset.clearAndSet(r().inspectAsset.first())}:null);La(p,{get tabGroups(){return l(f)},get onEditClick(){return l(m)},get state(){return l(n).inspectorState},set state(w){l(n).inspectorState=w}});var y=g(p,2);{var $=w=>{var b=Ta();u(b,"aria-hidden","true"),u(b,"size","small"),b.__click=[Da,r,i];var _=h(b);u(_,"slot","prefix"),u(_,"name","arrow-left"),E(w,b)};B(y,w=>{r().inspectAsset.first()!=r().editAsset.first()&&w($)})}E(o,c)};B(d,o=>{l(n)&&o(v)})}E(t,a),U()}_t(["click"]);var Ma=C("<sl-inline><div><sl-icon></sl-icon> </div></sl-inline> <!>",3);function Na(t,e){G(e,!0);const s=oe(),r=()=>ae(i,"$project",s),i=pe("project"),n=P(()=>r().editAsset.first());var a=we(),d=Y(a);{var v=o=>{var c=Ma(),p=Y(c);u(p,"style","padding-top: var(--sl-spacing-2x-small);");var f=h(p),m=h(f),y=g(m),$=g(p,2);Se($,()=>{var w;return((w=l(n))==null?void 0:w.constructor.outliner.component)??ge}),F(()=>{u(m,"name",l(n).constructor.icon),ve(y,` ${l(n).name??""}`)}),E(o,c)};B(d,o=>{var c;(c=l(n))!=null&&c.constructor.outliner&&o(v)})}E(t,a),U()}function Pa(t){}var Fa=C("<sl-stack><sl-details><sl-input-stack>Name <!></sl-input-stack></sl-details></sl-stack>",2);function Ra(t,e){G(e,!1);const s=oe(),r=()=>ae(i,"$project",s),i=pe("project");Pi();var n=Fa();u(n,"style","padding: var(--sl-spacing-small) 0px;");var a=h(n);u(a,"summary","Properties"),u(a,"open","true");var d=h(a),v=g(h(d));de(v,{get value(){return r().name},set value(o){Re(i,se(r).name=o,se(r))},$$legacy:!0}),E(t,n),U()}function qa(t){}function Va(t,e){G(e,!0);const s=oe(),r=()=>ae(i,"$project",s),i=pe("project"),n=P(()=>r().editAsset.first());var a=we(),d=Y(a);{var v=o=>{var c=we(),p=Y(c);Se(p,()=>{var f;return((f=l(n))==null?void 0:f.constructor.timeline.component)??ge}),E(o,c)};B(d,o=>{var c;(c=l(n))!=null&&c.constructor.timeline&&o(v)})}E(t,a),U()}const ys=(t,e=ge)=>{var s=Ga();u(s,"style","padding: var(--sl-spacing-x-small);"),Oe(s,21,e,Ce,(r,i)=>{var n=Ba(),a=Y(n);u(a,"style","--sl-spacing-medium: var(--sl-spacing-x-small); --sl-spacing-large: var(--sl-spacing-small);"),u(a,"slot","nav");var d=h(a);u(d,"style","flex-wrap:nowrap; gap:var(--sl-spacing-x-small);");var v=h(d),o=g(v),c=g(a,2),p=h(c);Se(p,()=>l(i).component),F(()=>{u(a,"panel",l(i).label),u(v,"name",l(i).icon),ve(o,` ${l(i).label??""}`),u(c,"name",l(i).label)}),E(r,n)}),E(t,s)};var Ba=C("<sl-tab><sl-inline><sl-icon></sl-icon> </sl-inline></sl-tab> <sl-tab-panel><!></sl-tab-panel>",3),Ga=C("<sl-tab-group></sl-tab-group>",2),Ua=C("<small> </small>"),Ya=C("<sl-inline><sl-icon></sl-icon> <sl-inline><sl-dropdown><sl-button>File</sl-button> <sl-menu><sl-menu-item>New Project</sl-menu-item> <sl-divider></sl-divider> <sl-menu-item>Export Project</sl-menu-item> <sl-menu-item>Import Project</sl-menu-item></sl-menu></sl-dropdown> <sl-dropdown><sl-button>Edit</sl-button> <sl-menu><sl-menu-item>Undo</sl-menu-item> <sl-menu-item>Redo</sl-menu-item></sl-menu></sl-dropdown> <sl-dropdown><sl-button>View</sl-button> <sl-menu><sl-menu-item></sl-menu-item></sl-menu></sl-dropdown></sl-inline></sl-inline>  <sl-stack><sl-split-panel><sl-stack><sl-split-panel><sl-stack><!></sl-stack> <sl-stack><sl-split-panel><sl-stack><!></sl-stack> <sl-stack><!></sl-stack></sl-split-panel></sl-stack></sl-split-panel></sl-stack> <sl-stack><!></sl-stack></sl-split-panel></sl-stack> <sl-divider></sl-divider> <sl-inline><!></sl-inline>",3);function Ha(t,e){G(e,!0);const s=oe(),r=()=>ae(i,"$project",s),i=Yi(new Us);gi("project",i);let n=P(()=>{var Z;return(Z=r().editAsset.first())==null?void 0:Z.constructor.editor});var a=Ya();te("keyup",xt,Z=>{r().task||!Z.ctrlKey||Z.key.toLowerCase()!="z"||(Z.shiftKey?ie.redo():ie.undo())});var d=Y(a);u(d,"style","box-shadow: var(--sl-shadow-small); padding: 0px var(--sl-spacing-medium);");var v=h(d);u(v,"name","palette-fill");var o=g(v,2);u(o,"style","--sl-spacing-medium: 0px; gap: 0px;");var c=h(o),p=h(c);u(p,"slot","trigger"),u(p,"variant","text"),u(p,"caret",!0);var f=g(p,2),m=h(f),y=g(m,2),$=g(y,2),w=g($,2);rt(f,Z=>fe==null?void 0:fe(Z));var b=g(c,2),_=h(b);u(_,"slot","trigger"),u(_,"variant","text"),u(_,"caret",!0);var k=g(_,2),x=h(k);F(()=>u(x,"disabled",!ie.canUndo()));var A=g(x,2);F(()=>u(A,"disabled",!ie.canRedo())),rt(k,Z=>fe==null?void 0:fe(Z));var j=g(b,2),D=h(j);u(D,"slot","trigger"),u(D,"variant","text"),u(D,"caret",!0);var O=g(D,2),M=h(O);M.textContent=document.body.classList.contains("sl-theme-dark")?"Light Theme":"Dark Theme",rt(O,Z=>fe==null?void 0:fe(Z));var q=g(d,2),X=h(q);u(X,"position","80");var H=h(X);u(H,"slot","start");var le=h(H);u(le,"position","20");var J=h(le);u(J,"slot","start");var re=h(J);ys(re,()=>[{label:"Assets",icon:"archive",component:xa},{label:"Outliner",icon:"diagram-3",component:Na}]);var ce=g(J,2);u(ce,"slot","end");var ue=h(ce);u(ue,"vertical",!0),u(ue,"position","70");var N=h(ue);u(N,"slot","start");var Q=h(N),ne=Ur(()=>[l(n)&&{label:l(n).title,icon:l(n).icon,component:l(n).component},{label:"Script",icon:"filetype-js",component:qa},{label:"Preview",icon:"play",component:Pa}].filter(Z=>Z));ys(Q,()=>l(ne));var De=g(N,2);u(De,"slot","end");var xe=h(De);ys(xe,()=>[{label:"Timeline",icon:"calendar3-range",component:Va}]);var ke=g(H,2);u(ke,"slot","end");var Ue=h(ke);ys(Ue,()=>[{label:"Inspector",icon:"toggles",component:Ia},{label:"Project",icon:"collection-play",component:Ra},{label:"Export",icon:"collection-play",component:Ea}]);var Fe=g(q,2);u(Fe,"style","margin:0px;");var Ye=g(Fe,2);u(Ye,"style","min-height: 1.5rem; padding: 0px var(--sl-spacing-medium)");var st=h(Ye);{var Bs=Z=>{var He=Ua(),Ee=h(He);F(()=>ve(Ee,`${(r().task.title||r().task.name)??""} ${r().task.status??""}`)),E(Z,He)};B(st,Z=>{r().task&&Z(Bs)})}te("sl-select",m,()=>{ie.reset(),i.set(new Us)}),te("sl-select",$,()=>{if(r().task)return;let Z=new Blob([JSON.stringify(r().serialize())],{type:"text/plain"}),He=URL.createObjectURL(Z),Ee=document.createElement("a");Ee.setAttribute("download",r().name),Ee.href=He,Ee.click()}),te("sl-select",w,()=>{if(r().task)return;let Z=document.createElement("input");Z.setAttribute("type","file"),Z.click(),Z.onchange=function(){if(Z.files.length<=0)return;Re(i,se(r).task={name:"project/import"},se(r));const He=Z.files[0],Ee=new FileReader;Ee.addEventListener("load",()=>{try{ie.reset(),i.set(new Us(JSON.parse(Ee.result.toString())))}catch(bn){console.error(bn)}finally{Re(i,se(r).task=null,se(r))}},!1),Ee.readAsText(He)}}),te("sl-select",x,()=>ie.undo()),te("sl-select",A,()=>ie.redo()),te("sl-select",M,()=>document.body.classList[document.body.classList.contains("sl-theme-dark")?"remove":"add"]("sl-theme-dark")),E(t,a),U()}Oi(Ha,{target:document.getElementById("app")});
